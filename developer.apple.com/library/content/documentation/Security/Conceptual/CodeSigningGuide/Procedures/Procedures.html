<!DOCTYPE html>
<html lang="en">
<head>
    <title>Code Signing Tasks</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40005929">
    <meta id="document-version" name="document-version" content="7.0.8">
    <meta id="build" name="build" content="88ffd7de8b734e5b1917ba7e99783a21" />
    <meta id="chapterId" name="chapterId" content="TP40005929-CH4">
    <meta id="date" name="date" content="2016-09-13">
    <meta id="description" name="description" content="Explains how to use command-line tools to sign your code.">
    <meta id="book-title" name="book-title" content="Code Signing Guide">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Technologies/Core Services Layer/Security}, {Topic/Security}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Code Signing Guide: Code Signing Tasks">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1260">
    <link id="book-index-page" rel="Start" title="Code Signing Guide" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="../RequirementLang/RequirementLang.html">
    <link id="previous-page" rel="Prev" type="text/html" href="../AboutCS/AboutCS.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40005929-CH4" title="Code Signing Tasks"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Code Signing Guide</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../RequirementLang/RequirementLang.html'>Next</a><a class='previousLink' rel='prev' href='../AboutCS/AboutCS.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40005929-CH4-SW2" title="Code Signing Tasks"></a><h1 id="pageTitle">Code Signing Tasks</h1><p>Typically, Xcode handles most code signing tasks for you, helping you manage your code signing identity, and applying your code signature to apps that you build and distribute. Letting Xcode handle code signing is generally the simplest and safest choice, because Xcode is designed with best practices built in. Read this chapter to gain a better understanding of what Xcode does on your behalf, or to handle special cases where you need to intervene in the code signing process.</p><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW1" title="About the Code Signing Identity"></a><h2 class="jump">About the Code Signing Identity</h2><p>You sign code using a <em class="newTerm">code signing identity</em>, which consists of a private key plus a digital certificate. The private key is an encryption key that only you have, making it impossible for anyone to forge your signature, as long as you keep the key secure. The digital certificate has a usage extension that enables it to be used for signing, and it contains the public key that complements your private key. The certificate is not secret, and is itself generally signed by a certificate authority, which effectively vouches for your identity. The simple act of code signing does not require a certificate authority’s signature on your certificate, but your signature is much more useful this way because anyone encountering your signature can be confident of its origin.</p><p>You can use more than one signing identity, each for its own purpose, such as one for beta seeds and one for final, released products. Also, you typically have different identities for iOS and macOS apps. However, most organizations use a single identity for a given platform and purpose. In other words, you typically do not have more than one Mac App Distribution identity, even if you publish many different apps, but you do have different identities for distributing macOS apps and iOS apps.</p><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW29" title="Before You Obtain a Signing Identity"></a><h3 class="jump">Before You Obtain a Signing Identity</h3><p>Before you obtain a code signing identity and sign your code, consider the following points:</p><ul class="ul"><li class="li"><p>Depending on your company’s internal policies, you might have to involve your company’s build and integration, legal, and marketing departments in decisions about what sort of signing identity to use and how to obtain it. Start this process well in advance of the time you need to actually sign the code for distribution to customers.</p></li><li class="li"><p>Any signed version of your code that gets into the hands of users will appear to have been endorsed by your company for use. Therefore, you might not want to use your “final” signing identity to sign code that is still in development.</p></li><li class="li"><p>A signing identity, no matter how obtained, is completely compromised if it is ever out of the physical control of whoever is authorized to sign the code. That means that the signing identity’s private key must never, under any circumstances, be given to end users, and should be restricted to one or a small number of trusted persons within your company. Before obtaining a signing identity and proceeding to sign code, determine who within your company will possess the identity, who can use it, and how it will be kept safe. For example, if the identity must be used by more than one person, you can keep it in the keychain of a secure computer and give the password of the keychain only to authorized users, or you can put the identity on a smart card to which only authorized users have the PIN.</p><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_1" title="Important"></a><p><strong>Important:</strong>&nbsp;If you lose control of your Apple-issued signing identity, such as your Developer ID or Mac App Distribution identity, report this to Apple immediately. Apple will invalidate the old identity and help you to replace it. While this seems like a bit of work, it is critical, because anyone possessing your identity can distribute potentially malicious or destructive code that looks like it came from you.</p><p></p></aside></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW30" title="Obtaining Your Signing Identities"></a><h3 class="jump">Obtaining Your Signing Identities</h3><p>The usual way to obtain a certificate for your signing identity is to get it from Apple. When you sign up for the Apple Developer Program, you gain access to the developer portal, where you can generate certificates for a variety of purposes, including Developer ID certificates (for public distribution of Mac apps), Mac App Distribution certificates (for submitting to the Mac App Store), iOS Distribution certificates (for submitting to the App Store), and others.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW36" title="Note"></a><p><strong>Note:</strong>&nbsp;Apple uses the industry-standard form and format of code signing certificates. Therefore, if your company already has a third-party signing identity that you use to sign code on other systems, you can use it with the macOS <code>codesign</code> command. Similarly, if your company is a certificate issuing authority, contact your IT department to find out how to get a signing certificate issued by your company. However, while these valid certificates allow you to sign your code, you can only distribute through the App Store or through the Developer ID program when you sign with a certificate issued by Apple.</p><p></p></aside></div><p>Xcode helps manage your code signing identities when you use the certificates available through the developer portal. For details on how to use Xcode to do this, see <span class="content_text"><a href="../../../../IDEs/Conceptual/AppDistributionGuide/MaintainingCertificates/MaintainingCertificates.html#//apple_ref/doc/uid/TP40012582-CH31" data-renderer-version="1" target="_self">Maintaining Your Signing Identities and Certificates</a></span> in <em><a href="../../../../IDEs/Conceptual/AppDistributionGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012582" data-renderer-version="1" target="_self">App Distribution Guide</a></em>.</p><p>If you choose to manage your signing identities manually because you are using a certificate authority other than Apple, you create them using the Certificate Assistant, which is provided as part of the Keychain Access application. You use this tool to create a public/private key pair, add these keys to your keychain, and generate a certificate request that you send to a certificate authority. In response, the certificate authority sends you a signed certificate that, in combination with the private key stored only on your system and known only to you, completes your digital identity. These are essentially the same steps Xcode carries out on your behalf (using Apple as the certificate authority) when it manages your code signing identity.</p><div class="task closed"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW37" title="To obtain a signed certificate using Certificate Assistant"></a><div class="task-name"><img class="taskbullet" src="../../../../../Resources/1260/Images/task_2x.png" alt="bullet" width="6" height="12" /><div>To obtain a signed certificate using Certificate Assistant</div></div><div class="task-content"><ol><li class="step"><div class="action"><p>Open Applications &gt; Utilities &gt; Keychain Access.</p></div></li><li class="step"><div class="action"><p>From the Keychain Access menu, choose Certificate Assistant &gt; Request a Certificate from a Certificate Authority….</p></div><div class="elaborations"><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW38" title="Figure 3-1Creating a certificate request using Certificate Assistant"></a><figcaption><strong class="caption_number">Figure 3-1</strong>&nbsp;&nbsp;Creating a certificate request using Certificate Assistant</figcaption><img src="../Art/create_cert_request1.jpg" alt="" width="626" height="471"></figure></div></li><li class="step"><div class="action"><p>Fill in your email address and a name for the certificate, and select <code>Saved to disk</code>. Then click Continue.</p></div></li><li class="step"><div class="action"><p>Select a place to store the request on disk, and click Save.</p></div><div class="elaborations"><p>Certificate Assistant generates the public and private keys and stores them in your keychain, while storing the matching certificate request on disk.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW39" title="Figure 3-2Observing public and private keys in Keychain Access"></a><figcaption><strong class="caption_number">Figure 3-2</strong>&nbsp;&nbsp;Observing public and private keys in Keychain Access</figcaption><img src="../Art/create_cert_request2.jpg" alt="" width="667" height="398"></figure></div></li><li class="step"><div class="action"><p>Upload the certificate request to the certificate authority (for example, to Apple using the developer portal, as part of the certificate generation flow).</p></div></li><li class="step"><div class="action"><p>Download the generated certificate (a file with a <code>cer</code> extension).</p></div></li><li class="step"><div class="action"><p>Open the certificate file by double clicking on it. </p></div><div class="elaborations"><p>Keychain Access imports the certificate and associates it with the corresponding private key you created earlier.</p></div></li></ol></div></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW15" title="Note"></a><p><strong>Note:</strong>&nbsp;If the private key is not already in your keychain when you import the certificate, for example because you move to another development machine, you must export the private key from the original system using the Keychain Access app, and import it on the new system as a separate step. The private key is not part of the certificate. When you use Certificate Assistant to generate the certificate request, the one and only copy of the private key is the one Certificate Assistant placed in your keychain at that time.</p><p></p></aside></div><p>Alternatively, you can create and self-sign a certificate using Certificate Assistant, and not involve a certificate authority. This can be useful during internal testing and development.</p><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_2" title="Important"></a><p><strong>Important:</strong>&nbsp;Do not ship apps signed by self-signed certificates. A self-signed certificate created with the Certificate Assistant is not recognized by users’ operating systems as a valid certificate for any purpose other than validating the designated requirement of your signed code. Because a self-signed certificate has not been signed by a recognized root certificate authority, the user can only verify that two versions of your application came from the same source; they cannot verify that your company is the true source of the code. For more information about root authorities, see <span class="content_text"><!--a target="_self" -->Security Concepts<!--/a--></span>.</p><p></p></aside></div><div class="task closed"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW40" title="To obtain a self-signed certificate using Certificate Assistant"></a><div class="task-name"><img class="taskbullet" src="../../../../../Resources/1260/Images/task_2x.png" alt="bullet" width="6" height="12" /><div>To obtain a self-signed certificate using Certificate Assistant</div></div><div class="task-content"><ol><li class="step"><div class="action"><p>Open Applications &gt; Utilities &gt; Keychain Access.</p></div></li><li class="step"><div class="action"><p>From the Keychain Access menu, choose Certificate Assistant &gt; Create a Certificate.</p></div><div class="elaborations"><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW41" title="Figure 3-3Creating a self-signed certificate using Certificate Assistant"></a><figcaption><strong class="caption_number">Figure 3-3</strong>&nbsp;&nbsp;Creating a self-signed certificate using Certificate Assistant</figcaption><img src="../Art/create_cert1.jpg" alt="" width="626" height="471"></figure></div></li><li class="step"><div class="action"><p>Fill in a name for the certificate. This name appears in the Keychain Access utility as the name of the certificate.</p></div></li><li class="step"><div class="action"><p>Choose <code>Self Signed Root</code> from the <code>Identity Type</code> pop-up menu.</p></div></li><li class="step"><div class="action"><p>Choose <code>Code Signing</code> from the <code>Certificate Type</code> pop-up menu.</p></div></li><li class="step"><div class="action"><p>Check the <code>Let me override defaults</code> checkbox. Click <code>Continue</code>.</p></div><div class="elaborations"><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW42" title="Figure 3-4Adding a serial number and validity period for a self-signed certificate in Certificate Assistant"></a><figcaption><strong class="caption_number">Figure 3-4</strong>&nbsp;&nbsp;Adding a serial number and validity period for a self-signed certificate in Certificate Assistant</figcaption><img src="../Art/create_cert2.jpg" alt="" width="626" height="471"></figure></div></li><li class="step"><div class="action"><p>Specify a serial number for the certificate.</p></div><div class="elaborations"><p>Any number will do as long as you have no other certificate with the same name and serial number.</p></div></li><li class="step"><div class="action"><p>Click <code>Continue</code>.</p></div><div class="elaborations"><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW43" title="Figure 3-5Adding personal information for a self-signed certificate in Certificate Assistant"></a><figcaption><strong class="caption_number">Figure 3-5</strong>&nbsp;&nbsp;Adding personal information for a self-signed certificate in Certificate Assistant</figcaption><img src="../Art/create_cert3.jpg" alt="" width="626" height="471"></figure></div></li><li class="step"><div class="action"><p>Fill in the information for the certificate. Click <code>Continue</code>.</p></div></li><li class="step"><div class="action"><p>Accept the defaults for the rest of the dialogs.</p></div></li></ol></div></div></section></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW6" title="Adding an Info.plist to Single-File Tools"></a><h2 class="jump">Adding an Info.plist to Single-File Tools</h2><p>As discussed in <span class="content_text"><a href="../AboutCS/AboutCS.html#//apple_ref/doc/uid/TP40005929-CH3-SW2" data-renderer-version="1">The Digital Signature</a></span>, by default, the system uses the <code>Info.plist</code> file of an application bundle to determine the code’s designated requirement. Although single-file tools don’t normally have an <code>Info.plist</code>, you can add one.</p><div class="task closed"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW12" title="To add an Info.plist file to your single-file tool"></a><div class="task-name"><img class="taskbullet" src="../../../../../Resources/1260/Images/task_2x.png" alt="bullet" width="6" height="12" /><div>To add an Info.plist file to your single-file tool</div></div><div class="task-content"><ol><li class="step"><div class="action"><p>Add an <code>Info.plist</code> file to your project.</p></div></li><li class="step"><div class="action"><p>Make sure the <code>Info.plist</code> file has at least the following keys:</p></div><div class="elaborations"><ul class="ul"><li class="li"><p><code>CFBundleIdentifier</code></p><p>This value is the default unique name of your program for code signing purposes, and must be globally unique. To ensure uniqueness, include your company’s name in the value. The usual form for this identifier is a hierarchical name in reverse DNS notation, starting with the top-level domain, followed by the company name, followed by the organization within the company, and ending with the product name. For example, the <code>CFBundleIdentifier</code> value for the <code>codesign</code> command is <code>com.apple.security.codesign</code>.</p></li><li class="li"><p><code>CFBundleName</code></p><p>This is the app’s short display name, a string no longer than 16 characters, and typically the name of the target. For the codesign command, the value is simply <code>codesign</code>.</p></li></ul></div></li><li class="step"><div class="action"><p>In Xcode, in the target’s Build Settings, change the <code>Create Info.plist Section in Binary</code> setting to <code>Yes</code>, and provide the path to the file in the <code>Info.plist File</code> setting as shown in <span class="content_text">Figure 3-6</span>.</p></div><div class="elaborations"><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW32" title="Figure 3-6Adding an Info.plist file to a single-file tool in Xcode"></a><figcaption><strong class="caption_number">Figure 3-6</strong>&nbsp;&nbsp;Adding an Info.plist file to a single-file tool in Xcode</figcaption><img src="../Art/xcode_tool_infoplist.jpg" class="wide-image" alt="" width="922" height="432"><img src="../Art/xcode_tool_infoplist.jpg" class="ipad-scaled-image" alt="" width="670" height="313"></figure></div></li></ol></div></div><p>As an example, <span class="content_text">Listing 3-1</span> gives the contents of the <code>Info.plist</code> file for the <code>codesign</code> command.</p><a name="//apple_ref/doc/uid/TP40005929-CH4-SW33" title="Listing 3-1The Info.plist file contents for the codesign command"></a><p class="codesample clear"><strong class="caption_number">Listing 3-1</strong>&nbsp;&nbsp;The Info.plist file contents for the codesign command</p><div class="codesample clear"><table><tr><td scope="row"><pre>&lt;plist version="1.0"&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CFBundleDevelopmentRegion&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;English&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CFBundleIdentifier&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;com.apple.security.codesign&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CFBundleInfoDictionaryVersion&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;6.0&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CFBundleName&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;codesign&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;key&gt;CFBundleVersion&lt;/key&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>    &lt;string&gt;0.3&lt;/string&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/dict&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;/plist&gt;<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW7" title="Signing Your Code Manually"></a><h2 class="jump">Signing Your Code Manually</h2><p>Whether Xcode manages your signing identity or you set it up manually, Xcode normally signs code that you build using the <code>codesign</code> tool. Xcode does this as the final step in the build process, and again when exporting for distribution. In the unusual case that you sign your code manually, or to interrogate an app for details about its signature, you use the <code>codesign</code> command line tool directly. See the <span class="content_text"><a href="x-man-page://1/codesign" class="urlLink" rel="external">codesign</a></span> manual page for a complete enumeration of the options this tool takes.</p><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW5" title="What to Code Sign"></a><h3 class="jump">What to Code Sign</h3><p>You sign all the individual components of your app, leaving no gaps, including:</p><ul class="ul"><li class="li"><p><strong>Nested code.</strong> First, you recursively sign all of the helpers, tools, libraries, frameworks, and other components that your app relies on, and that are bundled with your app. See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-TNTAG201" data-renderer-version="1">Ensuring Proper Code Signatures for Nested Code</a></span> for a discussion of how to properly embed and sign nested code in your app bundle. Also see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW9" data-renderer-version="1">Using Library Validation</a></span> for additional information about verifying libraries as a matter of system policy. </p></li><li class="li"><p><strong>Mach-O executables.</strong> The signing software applies individual signatures to each architectural component of a universal binary that represents the main executable of your app. These are independent, and usually only the native architecture on the end user's system is verified. To apply the signature, the <code>codesign</code> utility adds the signature directly to the executable file.</p></li><li class="li"><p><strong>Resources.</strong> Everything in an application bundle that is not explicit code (either nested code bundles or the main executable) is a resource, and all resources are signed. The resource files themselves are not modified as a result of signing. Instead, <code>codesign</code> places the digital signatures corresponding to all the application bundle’s non-code files in a special plist file within the bundle, namely <code>Contents/_CodeSignature/CodeResources</code>. The <code>codesign</code> utility places the signatures of any nested code here as well, which is why nested code is signed first.</p></li></ul></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW8" title="When to Code Sign"></a><h3 class="jump">When to Code Sign</h3><p>You sign as the last step before shipping your product, after all development and testing are done. Making changes after you sign invalidates the signature. Consider a signed application bundle as a read-only entity. Also, because code that you sign with a distribution certificate bears your stamp of approval, avoid handing out signed code that is not final.</p><p>In practice, Xcode applies your signature when you export your app for distribution. Alternatively, you can run <code>codesign</code> at any time on any system running macOS 10.5 or later, provided you have access to the signing identity. You can for example include it as a step in custom Makefile scripts.</p></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW4" title="How to Code Sign Manually"></a><h3 class="jump">How to Code Sign Manually</h3><p>Xcode normally signs on your behalf. You simply choose a signing identity in the General tab of a given target, and Xcode takes care of the details. This is usually the best option, because Xcode evolves with each new version to match changes in recommended code signing procedures and settings. Any customizations you introduce, on the other hand, require explicit maintenance.</p><p>When you do need additional control over the process, you add flags to the “Other Code Signing Flags” item of the project’s Build Settings tab, as shown in <span class="content_text">Figure 3-7</span>. Xcode passes these directly to the <code>codesign</code> command. Xcode still does most of the work, but you have the ability to influence specific aspects of the signing procedure.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW34" title="Figure 3-7Adding codesign flags using build settings in Xcode"></a><figcaption><strong class="caption_number">Figure 3-7</strong>&nbsp;&nbsp;Adding codesign flags using build settings in Xcode</figcaption><img src="../Art/xcode_codesign_flags.jpg" class="wide-image" alt="" width="922" height="432"><img src="../Art/xcode_codesign_flags.jpg" class="ipad-scaled-image" alt="" width="670" height="313"></figure><p>In rare cases when you need to sign manually (or to interrogate an existing code signature, as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW10" data-renderer-version="1">Examining a Code Signature</a></span>), you use the <code>codesign</code> command directly, as described below. This is generally the option of last resort, but may be helpful in certain special cases, especially when trying to debug an issue. Note that your signing identity must be in a keychain for <code>codesign</code> commands to work.</p><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW3" title="Signing Code Manually"></a><h4 class="jump">Signing Code Manually</h4><p>To sign the code located at <code>&lt;code-path&gt;</code>, using the signing identity <code>&lt;identity&gt;</code>, use the following command:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>The <code>&lt;code-path&gt;</code> value may be a bundle folder or a specific code binary. See <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW5" data-renderer-version="1">What to Code Sign</a></span> for more details.</p><p>The identity, whether obtained manually or automatically, and which must exist on one of your keychains, can be named with any (case sensitive) substring of the certificate's common name attribute, as long as the substring is unique throughout your keychains. (Signing identities are discussed in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW1" data-renderer-version="1">About the Code Signing Identity</a></span>.)</p><p>As is typical of Unix-style commands, this command gives no confirmation of success. To get feedback, include the <code>-v</code> option:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; -v &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>Use the <code>-r</code> option to specify an internal requirement. With this option you can specify a text file containing the requirements, a precompiled requirements binary, or the actual requirement text prefixed with an equal sign (<code>=</code>). For example, to add an internal requirement that only the built-in Perl interpreter be allowed to host a Perl script:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; -r="host =&gt; anchor apple and identifier com.apple.perl" &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>The code requirement language is described in <span class="content_text"><a href="../RequirementLang/RequirementLang.html#//apple_ref/doc/uid/TP40005929-CH5-SW1" data-renderer-version="1">Code Signing Requirement Language</a></span>. </p><p>If you have built your own certificate hierarchy (perhaps using Certificate Assistant—see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW1" data-renderer-version="1">About the Code Signing Identity</a></span>), and want to use your certificate’s anchor to form a designated requirement for your program:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; -r="designated =&gt; anchor /my/anchor/cert and identifier com.mycorp.myprog" &lt;code-path&gt;<span></span></pre></td></tr></table></div>	<div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW31" title="Note"></a><p><strong>Note:</strong>&nbsp;The requirement source language accepts either an SHA1 hash of a certificate (for example <code>H"abcd...."</code>) or a path to the DER encoded certificate in a file. It does not currently accept a reference to the certificate in a keychain, so you have to export the certificate before executing this command.</p><p></p></aside></div><p>You can also use the <code>csreq</code> command to write the requirements out to a file, and then use the path to that file as the input value for the <code>-r</code> option in the <code>codesign</code> command. See the manual page for <span class="content_text"><a href="x-man-page://1/csreq" class="urlLink" rel="external">csreq</a></span> for more information on that command.</p><p>Here are some other examples of requirements:</p><ul class="ul"><li class="li"><p><code>anchor apple</code> – The code is signed by Apple.</p></li><li class="li"><p><code>anchor trusted</code> – The anchor is trusted (for code signing) by the system.</p></li><li class="li"><p><code>certificate leaf = /path/to/certificate</code> – The leaf (signing) certificate is the one specified.</p></li><li class="li"><p><code>certificate leaf = /path/to/certificate and identifier "com.mycorp.myprog"</code> – The leaf certificate and program identifier are as specified.</p></li><li class="li"><p><code>info[mykey] = myvalue</code> – The <code>Info.plist</code> key <code>mykey</code> exists and has the value <code>myvalue</code>.</p></li></ul><p>Except for the explicit <code>anchor trusted</code> requirement, the system does not consult its trust settings database when verifying a code requirement. Therefore, as long as you don’t add this designated requirement to your code signature, the anchor certificate you use for signing your code does not have to be introduced to the user’s system for validation to succeed. </p></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW13" title="Adding Entitlements for Sandboxing Manually"></a><h4 class="jump">Adding Entitlements for Sandboxing Manually</h4><p>To enable App Sandbox for an application, Xcode adds your entitlement property list to the signature during the signing process.  If you are code signing manually, use the <code>--entitlements</code> flag, naming the target’s entitlements property list file:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign --entitlements /path/to/entitlements.plist -s &lt;identity&gt; &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>For a list of entitlement keys that can appear in the entitlement property list, see <em><a href="../../../../Miscellaneous/Reference/EntitlementKeyReference/Chapters/AboutEntitlements.html#//apple_ref/doc/uid/TP40011195" data-renderer-version="1" target="_self">Entitlement Key Reference</a></em>. For more information about App Sandbox, read <em><a href="../../AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html#//apple_ref/doc/uid/TP40011183" data-renderer-version="1" target="_self">App Sandbox Design Guide</a></em>.</p></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW16" title="Sharing a Designated Requirement"></a><h4 class="jump">Sharing a Designated Requirement</h4><p>If your application consists of a main executable with one or more helper tools that work together, appearing to the user as a single app, you can make these pieces of code indistinguishable to code signing by giving them all the same designated requirement. In that case, all your program components have access to the same keychain items and validate as the same program. Do this only if the programs involved are truly meant to form a single entity, with no distinctions made.</p><p>At first glance, the obvious way to achieve this is to give each entity the same <code>CFBundleIdentifier</code> in its respective <code>Info.plist </code>file, in which case <code>codesign</code> will automatically apply the same designated requirement to each. However, this is not recommended. Instead, give each individual app or tool that you ship its own identity (for example, <code>com.mycorp.myprog</code> for the main app, and <code>com.mycorp.myprog.helper1</code> and <code>com.mycorp.myprog.helper2</code> for its helpers). Then, manually assign the designated requirement to be the same for all of them, rather than allowing <code>codesign</code> to generate the DR automatically. Do this by adding the <code>-r</code> flag to “Other Code Signing Flags” in Xcode, with an appropriate argument, or if signing manually:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign —s &lt;identity&gt; -r "designated =&gt; anchor /my/anchor/cert and identifier com.mycorp.myprog" &lt;code-path&gt;<span></span></pre></td></tr></table></div></section></section></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-TNTAG201" title="Ensuring Proper Code Signatures for Nested Code"></a><h2 class="jump">Ensuring Proper Code Signatures for Nested Code</h2><p>Starting in macOS 10.9, the code signing software records nested code (such as a frameworks or XPC services that you add to your app) in the embedding code’s resource envelope using the nested codes’s own code signature. This means that when a code signature is created for an item, all the nested code that item contains <em>must already be signed correctly</em> or the signing attempt will fail. Xcode nests code like this by default, as long as all of the nested items exist as targets in your project, and your app’s build depends on these targets. <span class="content_text">Figure 3-8</span> shows an example of Xcode’s Build Phases panel for an XPC service called MyAppHelper properly nested in the MyApp app. Xcode begins the signing process at the deepest level of hierarchy (which in this case is the MyAppHelper service), working outward, and signing your top level app bundle as the final step.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW14" title="Figure 3-8Target dependencies for nested code"></a><figcaption><strong class="caption_number">Figure 3-8</strong>&nbsp;&nbsp;Target dependencies for nested code</figcaption><img src="../Art/nesting_target.jpg" class="wide-image" alt="" width="925" height="636"><img src="../Art/nesting_target.jpg" class="ipad-scaled-image" alt="" width="670" height="460"></figure><p>For this process to work properly, ensure that you include nested code in standard locations within a bundle, as shown in <span class="content_text">Table 3-1</span>.</p><a name="//apple_ref/doc/uid/TP40005929-CH4-TABLE3" title="Table 3-1Standard locations for code inside a bundle"></a><div class="tableholder"><table class="graybox" border = "0" cellspacing="0" cellpadding="5"><caption class="tablecaption"><strong class="caption_number">Table 3-1</strong>&nbsp;&nbsp;Standard locations for code inside a bundle</caption><tr><th scope="col" class="TableHeading_TableRow_TableCell"><p>
Location
</p></th><th scope="col" class="TableHeading_TableRow_TableCell"><p>
Description
</p></th></tr><tr><td  scope="row"><p>
Contents
</p></td><td ><p>
Top content directory of the bundle
</p></td></tr><tr><td  scope="row"><p>
Contents/MacOS
</p></td><td ><p>
Helper apps and tools
</p></td></tr><tr><td  scope="row"><p>
Contents/Frameworks
</p></td><td ><p>
Frameworks, dylibs
</p></td></tr><tr><td  scope="row"><p>
Contents/PlugIns
</p></td><td ><p>
Plug-ins, both loadable and extensions
</p></td></tr><tr><td  scope="row"><p>
Contents/XPCServices
</p></td><td ><p>
XPC services
</p></td></tr><tr><td  scope="row"><p>
Contents/Helpers
</p></td><td ><p>
Helper apps and tools
</p></td></tr><tr><td  scope="row"><p>
Contents/Library/Automator
</p></td><td ><p>
Automator actions
</p></td></tr><tr><td  scope="row"><p>
Contents/Library/Spotlight
</p></td><td ><p>
Spotlight importers
</p></td></tr><tr><td  scope="row"><p>
Contents/Library/LoginItems
</p></td><td ><p>
Installable login items
</p></td></tr><tr><td  scope="row"><p>
Contents/Library/LaunchServices
</p></td><td ><p>
Privileged helper tools installed by the ServiceManagement framework
</p></td></tr></table></div><p>The system expects these locations to contain <em>only</em> code. When evaluating an app bundle’s code signature, the system will reject arbitrary data files found in these locations because they're unsigned. Conversely, the code signing machinery considers anything not in one of these directories, including code, to be a resource. Any code not in one of these directories is therefore sealed twice: once as code, and once as a resource in the outer signature. This wastes both signing and verification time and storage space. Also, this can break the outer signature of apps that use their own update mechanisms to replace nested code. If this nested code is being treated as a resource, the outer signature doesn't know that this nested content is actually code.</p><p>Do not use custom subdirectories inside the code nesting directories shown in <span class="content_text">Table 3-1</span>. For example, place all your XPC services directly in the <code>Contents/XPCServices</code> directory. <em>Do not</em> organize them into subdirectories like <code>Contents/XPCServices/Net</code> and <code>Contents/XPCServices/Math</code>. Creating a custom directory hierarchy in one of these locations can break the code signing machinery, depending on the names of the subdirectories, and while it may appear to work in some cases, it is not a supported practice.</p><p>Store Python, Perl, shell, and other script files, and other non-Mach-O executables in your app's <code>Contents/Resources</code> directory. While it's possible to sign such executables and store them in <code>Contents/MacOS</code>, this is not recommended. This is because code signing uses extended attributes to store signatures in non-Mach-O executables such as script files. If the extended attributes are lost, the program's signature will be broken. Many file transfer techniques do not preserve extended attributes, nor are they preserved when uploading to the Mac App Store. When you put the script in the <code>Contents/Resources</code> directory, <code>codesign</code> stores the associated signature in the <code>Contents/_CodeSignature/CodeResources</code> file, which is preserved. Thus, in practice, a properly signed app that has all of its files in the correct places does not contain any signatures stored as extended attributes.</p><p>The code signing machinery performs some framework checks specifically on frameworks that are nested within other code. It's possible that signing a framework will succeed, but the result fails to validate when placed into another bundle's <code>Frameworks</code> directory. Make sure the framework is structured correctly per the requirements above.</p><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_3" title="Important"></a><p><strong>Important:</strong>&nbsp;When you manually code sign a framework, only the current version, the one pointed at by the <code>Versions/Current</code> symbolic link, is signed by default. Additional versions are signed, if needed, using the <code>--bundle-version</code> option:</p><p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; --bundle-version=VersionB MyCustomFramework.framework<span></span></pre></td></tr></table></div>However, manual verification tests all versions unless you specify a particular version, again using the <code>--bundle-version</code> flag.</p><p></p></aside></div><p>Bundles must have their <code>Info.plist</code> in the proper location. For app bundles, this is in <code>Contents</code>. For frameworks, this is in <code>Versions/Current/Resources</code>.</p><p>If signing or validation using the <code>codesign</code> command fails due to problems with nested code, the command outputs an additional line:</p><a name="//apple_ref/doc/uid/TP40005929-CH4-SOURCECODE22"></a><div class="codesample clear"><table><tr><td scope="row"><pre>In subcomponent: path<span></span></pre></td></tr></table></div><p>This output indicates which nested code caused the problem. Always look for this line to correctly interpret a code signing failure. If Xcode produces a code signing error during distribution signing, and you have nested code, this is something to check for.</p></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW9" title="Using Library Validation"></a><h2 class="jump">Using Library Validation</h2><p>Starting in iOS 8 and macOS 10.10, the system offers library validation as a policy for the dynamic libraries that a process links against. The policy is simple: A program may link against any library with the same team identifier in its code signature as the main executable, or with any Apple system library. Requests to link against other libraries are denied.</p><p>In iOS, an Apple system library is a library that Apple mastered into the OS image. In macOS, an Apple system library is a library shipped in <code>/System/Library</code>. The team identifier is the 10-character alphanumeric string, such as <code>YH9SZ5LKR4</code>, associated with your developer account, and recorded in your Apple-issued signing certificate.</p><p>In iOS, library validation is always enabled for all apps. There is nothing you need to do to opt in. In macOS, you may opt in to library validation by passing the <code>library</code> flag to the <code>codesign</code> tool when signing manually:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; -o library Example.app<span></span></pre></td></tr></table></div><p>You opt in to library validation when Xcode code signs for you by selecting the main project, going into Build Settings, and adding <code>-o library</code> to the “Other Code Signing Flags” section, as shown in <span class="content_text">Figure 3-9</span>.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40005929-CH4-SW35" title="Figure 3-9Enabling library validation using build settings in Xcode"></a><figcaption><strong class="caption_number">Figure 3-9</strong>&nbsp;&nbsp;Enabling library validation using build settings in Xcode</figcaption><img src="../Art/library_validation.jpg" class="wide-image" alt="" width="922" height="432"><img src="../Art/library_validation.jpg" class="ipad-scaled-image" alt="" width="670" height="313"></figure><p>To avoid signing errors when using library validation in your project, create embedded frameworks as Xcode targets of the same project, and build with standard settings. This ensures that the main executable and all frameworks are signed with the same certificate, and thus have the same team identifier. If you forget to sign frameworks that are built externally to the project and later copied into the bundle, library validation fails.</p><p>When the library validation policy denies an executable file from being mapped into the process’s address space, it generates a syslog error message with the tag <code>[deny- mmap]</code>. The error string includes the name of the process, the pid, and the path to the dynamic library. For example, the process <code>ls</code> with pid 528 trying to load the library <code>/private/tmp/libncurses.5.4.dylib</code> generates the following output:</p><div class="codesample clear"><table><tr><td scope="row"><pre>AMFI: ls(pid 528) - [deny-mmap] mapped file does not have a matching team identifier: /private/ tmp/libncurses.5.4.dylib<span></span></pre></td></tr><tr><td scope="row"><pre>AMFI: ls(pid 528) - [deny-mmap] process has team identifier BGHDFMN54X: /private/tmp/ libncurses.5.4.dylib<span></span></pre></td></tr><tr><td scope="row"><pre>AMFI: ls(pid 528) - [deny-mmap] mapped file has team identifier GDASFLKMKO: /private/tmp/ libncurses.5.4.dylib<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW17" title="Signing Installer Packages"></a><h2 class="jump">Signing Installer Packages</h2><p>Xcode does not create signed installer packages for you. Instead, you create signed installer packages (with a <code>.pkg</code> extension) by supplying an installer signing identity to the <span class="content_text"><a href="x-man-page://1/productbuild" class="urlLink" rel="external">productbuild</a></span> tool. For example, to create the package <code>Product.pkg</code> from a distribution file <code>Product.dist</code>, and sign it with your identity, as found in your keychain:</p><div class="codesample clear"><table><tr><td scope="row"><pre>productbuild --distribution Product.dist --sign &lt;identity&gt; Product.pkg<span></span></pre></td></tr></table></div><p>As with signed code, when you create a flat-file installation package, any modification after signing invalidates the signature.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW18" title="Note"></a><p><strong>Note:</strong>&nbsp;Bundle-style installer packages are no longer supported.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW19" title="Signing Disk Images"></a><h2 class="jump">Signing Disk Images</h2><p>Beginning in macOS 10.11.5, you can apply a code signature to read-only, compressed disk images that you use to distribute content. This is the recommended alternative to the deprecated <code>xip</code> file format, which is a signed archive you create with the <code>xip</code> command line utility.</p><p>Xcode does not handle signing disk images. Instead, use the command line <code>codesign</code> tool to do this manually:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -s &lt;identity&gt; &lt;disk-image&gt;<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_4" title="Note"></a><p><strong>Note:</strong>&nbsp;In macOS 10.11.5, avoid using the <code>--force</code> option for the <code>codesign</code> command for disk images. An issue prevents the correct re-signing of already-code-signed disk images. This problem is resolved in macOS 10.12 and later.</p><p></p></aside></div><p>When you sign your app with a Developer ID and distribute it using a disk image, it is possible to package additional unsigned code, such as dynamic libraries or scripts, together with the signed app bundle on the same disk image. If your app loads this extra content at runtime using a file system path relative to its own bundle, you have introduced a security risk. Because the extra code is outside the app bundle, and thus not covered by the app’s code signature, you can’t be certain that the extra content is intact. This is known as the <em>repackaging problem</em> because a bad actor can repackage your app bundle with a different, potentially malicious version of the external resources, and distribute the altered disk image as if it came from you.</p><p>To combat this problem, beginning in macOS 10.12, when an app is launched from a read-only disk image, the operating system employs Gatekeeper path randomization. The system copies the app to a random location in the file system before executing it, invalidating any relative paths that the app uses to access unprotected content outside its own app bundle.</p><p>You can bypass path randomization by code signing your disk image before you distribute it. When launching an app from a code-signed disk image, Gatekeeper disables path randomization because all the contents of the disk image are covered by a code signature.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_5" title="Note"></a><p><strong>Note:</strong>&nbsp;Whether or not Gatekeeper employs path randomization, it still evaluates an app and its code signature on first launch as usual. In other words, even when you distribute an app using a signed disk image, you still separately sign your app bundle in the usual way, before adding it to the disk image.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW10" title="Examining a Code Signature"></a><h2 class="jump">Examining a Code Signature</h2><p>Whether you code sign manually or Xcode does it for you, when you want to test the integrity of signed code or evaluate the way in which the system is going to treat signed code, you use the <code>codesign</code> and <code>spctl</code> command line tools.</p><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW21" title="Using codesign to Investigate a Code Signature"></a><h3 class="jump">Using codesign to Investigate a Code Signature</h3><p>You use the <code>codesign</code> command to interrogate an app or other signed entity about its signature. To verify the signature on a signed binary, use the <code>-v</code> option with no other options:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -v &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>This command confirms whether the code binaries at <code>&lt;code-path&gt;</code> are actually signed, the signature is valid, all the sealed components are unaltered, and the signature passes some basic consistency checks. It does not by default check that the code satisfies any requirements except its own designated requirement. To check a particular requirement, use the <code>-R</code> option. For example, to check that the Apple Mail application is identified as Mail, signed by Apple, and secured with Apple’s root signing certificate:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -v -R="identifier com.apple.mail and anchor apple" /Applications/Mail.app<span></span></pre></td></tr></table></div><p>Note that, unlike the <code>-r</code> option, the <code>-R</code> option takes only a single requirement rather than a requirements collection (no <code>=&gt;</code> tags). Add one or more additional <code>-v</code> options to get details on the validation process. Here is a longer example that demonstrates these concepts:</p><a name="//apple_ref/doc/uid/TP40005929-CH4-SOURCECODE1"></a><div class="codesample clear"><table><tr><td scope="row"><pre>$ # Make a copy of the md5 tool.<span></span></pre></td></tr><tr><td scope="row"><pre>$ cp /sbin/md5 .<span></span></pre></td></tr><tr><td scope="row"><pre>$ # The copy still satisfies its DR.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -vvvv ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: valid on disk<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: satisfies its Designated Requirement<span></span></pre></td></tr><tr><td scope="row"><pre>$ # And we can check that it's signed by Apple.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -vvvv -R="anchor apple" ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: valid on disk<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: satisfies its Designated Requirement<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: explicit requirement satisfied<span></span></pre></td></tr><tr><td scope="row"><pre>$ # Modify the binary.<span></span></pre></td></tr><tr><td scope="row"><pre>$ chmod u+w ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>$ dd if=/dev/zero bs=1 count=1 seek=8192 conv=notrunc of=./md5<span></span></pre></td></tr><tr><td scope="row"><pre>1+0 records in<span></span></pre></td></tr><tr><td scope="row"><pre>1+0 records out<span></span></pre></td></tr><tr><td scope="row"><pre>1 bytes transferred in 0.000036 secs (27777 bytes/sec)<span></span></pre></td></tr><tr><td scope="row"><pre>$ # The modified program no longer satisfies its DR.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -vvvv ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: code or signature modified<span></span></pre></td></tr><tr><td scope="row"><pre>$ # But we can resign the modified program with our signature.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -s my-signing-identity -f ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: replacing existing signature<span></span></pre></td></tr><tr><td scope="row"><pre>$ # And the modified program now satisfies its DR.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -vvvv ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: valid on disk<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: satisfies its Designated Requirement<span></span></pre></td></tr><tr><td scope="row"><pre>$ # But not our supplement requirement.<span></span></pre></td></tr><tr><td scope="row"><pre>$ codesign -vvvv -R="anchor apple" ./md5<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: valid on disk<span></span></pre></td></tr><tr><td scope="row"><pre>./md5: satisfies its Designated Requirement<span></span></pre></td></tr><tr><td scope="row"><pre>test-requirement: failed to satisfy code requirement(s)<span></span></pre></td></tr></table></div><p>If you pass a number rather than a path to the verify option, <code>codesign</code> takes the number to be the process ID (pid) of a running process, and performs dynamic validation instead. </p><p>When verifying signatures, add <code>--deep</code> to ensure recursive validation of nested code. Without <code>--deep</code>, validation will be shallow. Note that Gatekeeper always performs <code>--deep</code> style validation, as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-TNTAG211" data-renderer-version="1">Checking Gatekeeper Conformance</a></span>.</p><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-DontLinkElementID_6" title="Important"></a><p><strong>Important:</strong>&nbsp;While you use the <code>--deep</code> option for <em>verification</em> to mimic what Gatekeeper does, it is not recommended for <em>signing</em>. During signing, if you have nested code, and if you are signing manually, you sign nested code in stages (as Xcode does automatically), starting with the most deeply embedded components first. You then sign code at the next level of hierarchy, and so on. You work your way outward, finally signing the top level entity that contains all the others. Signing all the components in one shot with <code>--deep</code> is for emergency repairs and temporary adjustments only. Note that signing with the combination <code>--deep --force</code> will forcibly re-sign all code in a bundle.</p><p></p></aside></div><p>To get information about a code signature (without actually verifying it), use the <code>-d</code> option. For example, to output the code signature’s internal requirements, use the following command:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign -d -r- &lt;code-path&gt;<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW22" title="Using spctl to Test a Code Signature Against System Policies"></a><h3 class="jump">Using spctl to Test a Code Signature Against System Policies</h3><p>After you have produced your final deliverable, but before you ship it, you can use the <code>spctl(8)</code> tool to test your code signatures against various system policies that the user may set. Because the tool evaluates against the policies on the local machine, the outcome is affected by the settings in the Security preferences pane, and can further be modified by parental controls, remote management, and so on. Conversely, changes made with spctl (such as adding or disabling rules) affect future Gatekeeper judgments directly.</p><p>The basic syntax for code signing assessment is shown below:</p><div class="codesample clear"><table><tr><td scope="row"><pre># Assess an application or tool<span></span></pre></td></tr><tr><td scope="row"><pre>spctl --assess --type execute myTool<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre># Assess an installer package<span></span></pre></td></tr><tr><td scope="row"><pre>spctl --assess --type install myInstallerPackage.pkg<span></span></pre></td></tr></table></div><p>If your application or package signature is valid, these tools exit silently with an exit status of <code>0</code>. (Type <code>echo $?</code> to display the exit status of the last command.) If the signature is invalid, these tools print an error message and exit with a nonzero exit status.</p><p>For more detailed information about why the assessment failed, you can add the <code>--verbose</code> flag. For example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --assess --verbose=4 /bin/ls<span></span></pre></td></tr></table></div><p>This prints the following output:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    /bin/ls: accepted<span></span></pre></td></tr><tr><td scope="row"><pre>    source=Apple System<span></span></pre></td></tr></table></div><p>To see <em>everything</em> the system has to say about an assessment, pass the <code>--raw</code> option. With this flag, the <code>spctl</code> tool prints a detailed assessment as a property list.</p><p>To whitelist a program (exactly as if the UI did it), type:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --add --label mytest /some/program<span></span></pre></td></tr></table></div><p>The --label is an optional tag that you can add to your own rules. This tag allows you to remove the rule easily by typing:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --remove --label mytest<span></span></pre></td></tr></table></div><p>Note that this removes all rules that match the label, which means that it is a handy way to clean up after testing. You can also temporarily suspend your rules by typing:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --disable --label mytest<span></span></pre></td></tr></table></div><p>and reenable them later by typing:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --enable --label mytest<span></span></pre></td></tr></table></div><p>To see a list of the current assessment rules, use the <code>--list</code> flag. For example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --list --type execute<span></span></pre></td></tr></table></div><p>The resulting list of rules might look like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    3[Apple System] P0 allow execute<span></span></pre></td></tr><tr><td scope="row"><pre>        anchor apple<span></span></pre></td></tr><tr><td scope="row"><pre>    4[Mac App Store] P0 allow execute<span></span></pre></td></tr><tr><td scope="row"><pre>        anchor apple generic and certificate leaf[field.1.2.840.113635.100.6.1.9] exists<span></span></pre></td></tr><tr><td scope="row"><pre>    5[Developer ID] P0 allow execute<span></span></pre></td></tr><tr><td scope="row"><pre>        anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] exists and certificate leaf[field.1.2.840.113635.100.6.1.13] exists<span></span></pre></td></tr><tr><td scope="row"><pre>    7[UNLABELED] P0 allow execute [/var/tmp/firefly/RUN-FIREFLY-JOBS/test1.app]<span></span></pre></td></tr><tr><td scope="row"><pre>        cdhash H"f34c03450da53c07ac69282089b68723327f278a"<span></span></pre></td></tr><tr><td scope="row"><pre>    8[UNLABELED] P0 allow execute [/var/tmp/firefly/RUN-FIREFLY-JOBS/test1.app]<span></span></pre></td></tr><tr><td scope="row"><pre>        identifier "org.tpatko.Run-Firefly-Job-X-Cores" and certificate root = H"5056a3983e3b7f44e17e3db8e483b35b6745b236"<span></span></pre></td></tr></table></div><p>Notice that the list above includes a number of predefined rules that describe the handling of certain classes of code. For example, rule 5 captures all applications signed by a Developer ID. You can disable those applications by typing:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --disable --label "Developer ID"<span></span></pre></td></tr></table></div><p>This command tells the system to no longer allow execution of any Developer ID-signed applications that the user has not previously run. This is exactly what happens when you use the preference UI to switch to "Mac App Store only".</p><p>Each rule in the list has a unique number that can be used to address it. For example, if you type:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --list --label "Developer ID"<span></span></pre></td></tr></table></div><p>you might get a list of rules that looks like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    5[Developer ID] P0 allow execute<span></span></pre></td></tr><tr><td scope="row"><pre>        anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] exists and certificate leaf[field.1.2.840.113635.100.6.1.13] exists<span></span></pre></td></tr><tr><td scope="row"><pre>    6[Developer ID] P0 allow install<span></span></pre></td></tr><tr><td scope="row"><pre>        anchor apple generic and certificate 1[field.1.2.840.113635.100.6.2.6] exists and certificate leaf[field.1.2.840.113635.100.6.1.14] exists<span></span></pre></td></tr></table></div><p>Notice that there are separate rules for execution (5) and installation (6), and you can enable and disable them separately. For example, to enable installation of new applications signed with a Developer ID, you can type:</p><div class="codesample clear"><table><tr><td scope="row"><pre>spctl --enable --rule 6<span></span></pre></td></tr></table></div><p>Finally, <code>spctl</code> allows you to enable or disable the security assessment policy subsystem. </p><div class="codesample clear"><table><tr><td scope="row"><pre>sudo spctl --master-enable   # enables assessment<span></span></pre></td></tr><tr><td scope="row"><pre>sudo spctl --master-disable  # disables assessment<span></span></pre></td></tr><tr><td scope="row"><pre>spctl --status               # shows whether assessment is enabled<span></span></pre></td></tr></table></div><p>For more information, see the manual page for <code>spctl(8)</code>.</p></section></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-TNTAG211" title="Checking Gatekeeper Conformance"></a><h2 class="jump">Checking Gatekeeper Conformance</h2><p>It’s a good idea to test your app for Gatekeeper conformance before you ship, especially if you sign your app with a Developer ID and distribute by some means other than the Mac App Store, such as through a website.</p><p>Gatekeeper is a configurable system facility that examines files that you download to your Mac, for example from a website or in an email attachment. It applies rules to decide whether to allow or reject an attempt to open an item for the first time on a given system. When deciding whether or not to allow an app to run, Gatekeeper uses the app’s code signature to test the integrity and authorship of the app. By default, Gatekeeper only allows apps that have an intact signature, and that are downloaded from the Mac App Store or are signed with a Developer ID. </p><p>In addition to this primary tactic, Gatekeeper does the following:</p><ul class="ul"><li class="li"><p>Beginning with macOS 10.9.5, Gatekeeper rejects any code signed with so-called Version 1 code signatures (those created with macOS versions prior to 10.9). Among other things, this implies that no resource “holes” are allowed (all resource files must have a valid signature), and code should be properly nested, as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-TNTAG201" data-renderer-version="1">Ensuring Proper Code Signatures for Nested Code</a></span>.</p></li><li class="li"><p>Beginning with macOS 10.10.4, Gatekeeper verifies that no libraries are loaded from outside an app bundle. If an app uses <code>@rpath</code> or an absolute path to link to a dynamic library outside of the app, Gatekeeper rejects the app. This restriction applies to the app’s main executable and any other executable in the bundle, including libraries. This restriction applies even if the path does not exist (which normally causes the dynamic linker to fall back to a library inside the bundle). The error will appear in the system log, with a message like the following for an app <code>MyApp.app</code> trying to link against the library <code>libLibrary.dylib</code> in the nonstandard location <code>/foo</code>:</p><div class="codesample clear"><table><tr><td scope="row"><pre>7/8/15 4:00:19.942 PM CoreServicesUIAgent[5940]: File /Applications/MyApp.app/Contents/MacOS/MyApp failed on loadCmd /foo/libLibrary.dylib<span></span></pre></td></tr><tr><td scope="row"><pre>7/8/15 4:00:19.942 PM CoreServicesUIAgent[5940]: Fails dylib check<span></span></pre></td></tr></table></div><p>As with other Gatekeeper functions, this check is performed the first time the app is run. It does not apply to libraries that the app loads itself using the <code>dlopen</code> function, although those libraries are still potentially subject to library validation, as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40005929-CH4-SW9" data-renderer-version="1">Using Library Validation</a></span>. It also does not apply to libraries loaded from paths where libraries are expected to reside, such as <code>/System</code>, <code>/Library</code>, and <code>/usr/</code>.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW23" title="Note"></a><p><strong>Note:</strong>&nbsp;To see which libraries an app references, use the command <code>otool -L MyApp.app/Contents/MacOS/MyApp</code>.</p><p></p></aside></div></li><li class="li"><p>Beginning with macOS 10.11, Gatekeeper rejects code signed with signatures that don't cover the entire app bundle. This should not affect anyone using normal build tools. Gatekeeper also rejects apps containing symbolic links that:</p><ul class="nested"><li class="nested li"><p>Point to nowhere</p></li><li class="nested li"><p>Point to places that are legitimately excluded from the app's signature</p></li><li class="nested li"><p>Point outside the app bundle, except to locations in <code>/System</code> and <code>/Library</code>.</p></li></ul><p>A nested bundle may contain symlinks that point into the enclosing bundle.</p></li></ul><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW24" title="Note"></a><p><strong>Note:</strong>&nbsp;Users can override Gatekeeper's assessment of your app's signature using the steps described in <span class="content_text"><a href="http://support.apple.com/kb/HT5290" class="urlLink" rel="external">this support article</a></span>.</p><p></p></aside></div><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW25" title="Testing Conformance with Command Line Tools"></a><h3 class="jump">Testing Conformance with Command Line Tools</h3><p>To get a sense of whether your app conforms to Gatekeeper policies when you distribute with Developer ID, you can use the following <code>codesign</code> command to mimic what Gatekeeper does:</p><div class="codesample clear"><table><tr><td scope="row"><pre>codesign --verify --deep --strict --verbose=2 &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>If your app is signed properly, the output looks like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>&lt;code-path&gt;: valid on disk<span></span></pre></td></tr><tr><td scope="row"><pre>&lt;code-path&gt;: satisfies its Designated Requirement<span></span></pre></td></tr></table></div><p>Alternately, the <code>spctl</code> utility is actually a command-line interface to the same security assessment policy subsystem that Gatekeeper uses. Like Gatekeeper, <code>spctl</code> only accepts Developer ID signed apps and apps downloaded from the Mac App Store by default. Run <code>spctl</code> on your app like this:</p><a name="//apple_ref/doc/uid/TP40005929-CH4-SOURCECODE15"></a><div class="codesample clear"><table><tr><td scope="row"><pre>spctl -a -t exec -vv &lt;code-path&gt;<span></span></pre></td></tr></table></div><p>This is the output if your app's signature is accepted:</p><a name="//apple_ref/doc/uid/TP40005929-CH4-SOURCECODE16"></a><div class="codesample clear"><table><tr><td scope="row"><pre>&lt;code-path&gt;: accepted<span></span></pre></td></tr><tr><td scope="row"><pre>source=Developer ID<span></span></pre></td></tr><tr><td scope="row"><pre>origin=&lt;identity&gt;<span></span></pre></td></tr></table></div><p>If you get any result other than <code>accepted</code>, your app is not compatible with Gatekeeper.</p></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW26" title="Testing Conformance Explicitly"></a><h3 class="jump">Testing Conformance Explicitly</h3><p>The <code>codesign</code> and <code>spctl</code> tools give a good sense of how Gatekeeper will respond to your app, but they are not exhaustive. For example, they do not test for the condition that libraries be loaded from inside the bundle or from one of the standard system locations. Therefore, it is best to actually invoke Gatekeeper as a final test before shipping. To do this:</p><p></p><ol class="ol"><li class="li"><p>Package your app the way you ship it, such as in a disk image.</p></li><li class="li"><p>Download your app from its website, mail it to yourself, or send it to yourself using AirDrop or Message. This quarantines the app. This is necessary to trigger the Gatekeeper check as Gatekeeper only checks quarantined files the first time they're opened.</p></li><li class="li"><p>Drag-install your app to the <code>/Applications</code> folder and launch it.</p><ul class="ul"><li class="li"><p>If there is no dialog at all, a step was missed. Check the instructions and repeat the test.</p></li><li class="li"><p>If you get the dialog <code>... is from the Internet</code> with an <code>Open</code> button, the test succeeded.</p></li><li class="li"><p>If you're told that only apps from the Mac App Store or registered developers can be installed, your app isn't Developer ID-signed. Use the Xcode Organizer to export a Developer ID-signed copy of your app and repeat the test. It may also be that the system doesn't think your bundle is an app bundle because its <code>Info.plist</code> doesn't have its <code>CFBundlePackageType</code> property set to <code>APPL</code>.</p></li><li class="li"><p>If you get any other complaint, your signature is weak or broken.</p></li></ul></li></ol></section></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW27" title="Using Hash Agility"></a><h2 class="jump">Using Hash Agility</h2><p>Beginning in macOS 10.11.5, stronger cryptographic hashing is available to both create and evaluate code signatures. When you build and code sign using macOS 10.11.5 or later, the code signing machinery uses the improved hashing to create a code signature. There is nothing you need to do to adopt this behavior. At the same time, to maintain backward compatibility, the system includes a legacy code signature alongside the modern one, in a way that works transparently with older systems.</p><p>Similarly, during code signature evaluation on macOS 10.11.5 or later, the system uses the stronger signature if it is available, but  still interprets older signatures if necessary. As with signing, there is nothing you need to do to adopt the improved hashing during code signature evaluation. Together, these are referred to as <em class="newTerm">hash agility</em>.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40005929-CH4-SW28" title="Note"></a><p><strong>Note:</strong>&nbsp;When you set the deployment target in Xcode build settings to 10.12 or higher, the code signing machinery generates only the modern code signature for Mach-O binaries. A binary executable is always unsuitable for systems older than the specified deployment target, but in this case, older systems also fail to interpret the code signature.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40005929-CH4-SW11" title="Shipping and Updating Your Product"></a><h2 class="jump">Shipping and Updating Your Product</h2><p>Maintaining the integrity of a code signature requires the signed code installed on the user’s system to be identical to the code that you signed. It does not matter how you package, deliver, or install your product as long as you don’t introduce any changes into the product. Compression, encoding, and encrypting the code are all fine because decompression, decoding, and decryption reverse these processes exactly. You can even use binary patching, because that process updates both the code and the embedded signature simultaneously. You can use any installer you like, as long as it doesn't write anything into the product as it installs it. Drag-installs are fine as well. As long as the final product on the user’s system is bit-for-bit identical to the signed code you produced, the signature remains intact.</p><p>When you have qualified a new version of your product, sign it just as you signed the previous version, with the same identifier and the same designated requirement. The user’s system considers the new version of your product to be the same program as the previous version. For example, Keychain Services does not distinguish older and newer versions of your program as long as both are signed and the unique Identifier remains constant. </p></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../RequirementLang/RequirementLang.html'>Next</a><a class='previousLink' rel='prev' href='../AboutCS/AboutCS.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2016 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2016-09-13</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/1260/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/library.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/feedback.js"></script>
</body>
</html>
