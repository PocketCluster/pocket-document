<!DOCTYPE html>
<html lang="en">
<head>
    <title>Values and Collections</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40011210">
    <meta id="document-version" name="document-version" content="2.7.1">
    <meta id="build" name="build" content="ded95564c405529dbbbe590063edd114" />
    <meta id="chapterId" name="chapterId" content="TP40011210-CH7">
    <meta id="date" name="date" content="2014-09-17">
    <meta id="description" name="description" content="Describes elements of best practice when writing code with Objective-C using ARC.">
    <meta id="book-title" name="book-title" content="Programming with Objective-C">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/Languages & Utilities/Objective-C}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Programming with Objective-C: Values and Collections">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1260">
    <link id="book-index-page" rel="Start" title="Programming with Objective-C" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="../WorkingwithBlocks/WorkingwithBlocks.html">
    <link id="previous-page" rel="Prev" type="text/html" href="../WorkingwithProtocols/WorkingwithProtocols.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40011210-CH7" title="Values and Collections"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Programming with Objective-C</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../WorkingwithBlocks/WorkingwithBlocks.html'>Next</a><a class='previousLink' rel='prev' href='../WorkingwithProtocols/WorkingwithProtocols.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40011210-CH7-SW1" title="Values and Collections"></a><h1 id="pageTitle">Values and Collections</h1><p>Although Objective-C is an object-oriented programming language, it is a superset of C, which means you can use any of the standard C <em class="newTerm">scalar</em> (non-object) types like <code>int</code>, <code>float</code> and <code>char</code> in Objective-C code. There are also additional scalar types available in Cocoa and Cocoa Touch applications, such as <code>NSInteger</code>, <code>NSUInteger</code> and <code>CGFloat</code>, which have different definitions depending on the target architecture.</p><p>Scalar types are used in situations where you just don’t need the benefits (or associated overheads) of using an object to represent a value. While strings of characters are usually represented as instances of the <code>NSString</code> class, numeric values are often stored in scalar local variables or properties.</p><p>It’s possible to declare a C-style array in Objective-C, but you’ll find that collections in Cocoa and Cocoa Touch applications are usually represented using instances of classes like <code>NSArray</code> or <code>NSDictionary</code>. These classes can only be used to collect Objective-C objects, which means that you’ll need to create instances of classes like <code>NSValue</code>, <code>NSNumber</code> or <code>NSString</code> in order to represent values before you can add them to a collection.</p><p>The previous chapters in this guide make frequent use of the <code>NSString</code> class and its initialization and class factory methods, as well as the Objective-C <code>@"string"</code> literal, which offers a concise syntax to create an <code>NSString</code> instance. This chapter explains how to create <code>NSValue</code> and <code>NSNumber</code> objects, using either method calls or through Objective-C value literal syntax.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW2" title="Basic C Primitive Types Are Available in Objective-C"></a><h2 class="jump">Basic C Primitive Types Are Available in Objective-C</h2><p>Each of the standard C scalar variable types is available in Objective-C:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int someInteger = 42;<span></span></pre></td></tr><tr><td scope="row"><pre>    float someFloatingPointNumber = 3.1415;<span></span></pre></td></tr><tr><td scope="row"><pre>    double someDoublePrecisionFloatingPointNumber = 6.02214199e23;<span></span></pre></td></tr></table></div><p>as well as the standard C operators:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int someInteger = 42;<span></span></pre></td></tr><tr><td scope="row"><pre>    someInteger++;            // someInteger == 43<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    int anotherInteger = 64;<span></span></pre></td></tr><tr><td scope="row"><pre>    anotherInteger--;         // anotherInteger == 63<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    anotherInteger *= 2;      // anotherInteger == 126<span></span></pre></td></tr></table></div><p>If you use a scalar type for an Objective-C property, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>@interface XYZCalculator : NSObject<span></span></pre></td></tr><tr><td scope="row"><pre>@property double currentValue;<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>it’s also possible to use C operators on the property when accessing the value via dot syntax, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>@implementation XYZCalculator<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)increment {<span></span></pre></td></tr><tr><td scope="row"><pre>    self.currentValue++;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)decrement {<span></span></pre></td></tr><tr><td scope="row"><pre>    self.currentValue--;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>- (void)multiplyBy:(double)factor {<span></span></pre></td></tr><tr><td scope="row"><pre>    self.currentValue *= factor;<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>Dot syntax is purely a syntactic wrapper around accessor method calls, so each of the operations in this example is equivalent to first using the get accessor method to get the value, then performing the operation, then using the set accessor method to set the value to the result.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW4" title="Objective-C Defines Additional Primitive Types"></a><h3 class="jump">Objective-C Defines Additional Primitive Types</h3><p>The <code>BOOL</code> scalar type is defined in Objective-C to hold a Boolean value, which is either <code><!--a  -->YES<!--/a--></code> or <code><!--a  -->NO<!--/a--></code>. As you might expect, <code><!--a  -->YES<!--/a--></code> is logically equivalent to <code>true</code> and <code>1</code>, while <code><!--a  -->NO<!--/a--></code> is equivalent to <code>false</code> and <code>0</code>.</p><p>Many parameters to methods on Cocoa and Cocoa Touch objects also use special scalar numeric types, such as <code>NSInteger</code> or <code>CGFloat</code>.</p><p>For example, the <code>NSTableViewDataSource</code> and <code>UITableViewDataSource</code> protocols (described in the previous chapter) both have methods requesting the number of rows to display:</p><div class="codesample clear"><table><tr><td scope="row"><pre>@protocol NSTableViewDataSource &lt;NSObject&gt;<span></span></pre></td></tr><tr><td scope="row"><pre>- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView;<span></span></pre></td></tr><tr><td scope="row"><pre>...<span></span></pre></td></tr><tr><td scope="row"><pre>@end<span></span></pre></td></tr></table></div><p>These types, like <code>NSInteger</code> and <code>NSUInteger</code>, are defined differently depending on the target architecture. When building for a 32-bit environment (such as for iOS), they are 32-bit signed and unsigned integers respectively; when building for a 64-bit environment (such as for the modern OS X runtime) they are 64-bit signed and unsigned integers respectively.</p><p>It’s best practice to use these platform-specific types if you might be passing values across API boundaries (both internal and exported APIs), such as arguments or return values in method or function calls between your application code and a framework.</p><p>For local variables, such as a counter in a loop, it’s fine to use the basic C types if you know that the value is within the standard limits.</p></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW6" title="C Structures Can Hold Primitive Values"></a><h3 class="jump">C Structures Can Hold Primitive Values</h3><p>Some Cocoa and Cocoa Touch API use C structures to hold their values. As an example, it’s possible to ask a string object for the range of a substring, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSString *mainString = @"This is a long string";<span></span></pre></td></tr><tr><td scope="row"><pre>    NSRange substringRange = [mainString rangeOfString:@"long"];<span></span></pre></td></tr></table></div><p>An <code>NSRange</code> structure holds a location and a length. In this case, <code>substringRange</code> will hold a range of <code>{10,4}</code>—the “<code>l</code>” at the start of <code>@"long"</code> is the character at zero-based index <code>10</code> in <code>mainString</code>, and <code>@"long"</code> is <code>4</code> characters in length.</p><p>Similarly, if you need to write custom drawing code, you’ll need to interact with Quartz, which requires structures based around the <code>CGFloat</code> data type, like <code>NSPoint</code> and <code>NSSize</code> on OS X and <code>CGPoint</code> and <code>CGSize</code> on iOS. Again, <code>CGFloat</code> is defined differently depending on the target architecture.</p><p>For more information on the Quartz 2D drawing engine, see <em><a href="../../../../GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066" data-renderer-version="1" target="_self">Quartz 2D Programming Guide</a></em>.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW3" title="Objects Can Represent Primitive Values"></a><h2 class="jump">Objects Can Represent Primitive Values</h2><p>If you need to represent a scalar value as an object, such as when working with the collection classes described in the next section, you can use one of the basic value classes provided by Cocoa and Cocoa Touch.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW5" title="Strings Are Represented by Instances of the NSString Class"></a><h3 class="jump">Strings Are Represented by Instances of the NSString Class</h3><p>As you’ve seen in the previous chapters, <code>NSString</code> is used to represent a string of characters, like <code>Hello World</code>. There are various ways to create <code>NSString</code> objects, including standard allocation and initialization, class factory methods or literal syntax:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSString *firstString = [[NSString alloc] initWithCString:"Hello World!"<span></span></pre></td></tr><tr><td scope="row"><pre>                                                     encoding:NSUTF8StringEncoding];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *secondString = [NSString stringWithCString:"Hello World!"<span></span></pre></td></tr><tr><td scope="row"><pre>                                                encoding:NSUTF8StringEncoding];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *thirdString = @"Hello World!";<span></span></pre></td></tr></table></div><p>Each of these examples effectively accomplishes the same thing—creating a string object that represents the provided characters.</p><p>The basic <code>NSString</code> class is immutable, which means its contents are set at creation and cannot later be changed. If you need to represent a different string, you must create a new string object, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSString *name = @"John";<span></span></pre></td></tr><tr><td scope="row"><pre>    name = [name stringByAppendingString:@"ny"];    // returns a new string object<span></span></pre></td></tr></table></div><p>The <code>NSMutableString</code> class is the mutable subclass of <code>NSString</code>, and allows you to change its character contents at runtime using methods like <code>appendString:</code> or <code>appendFormat:</code>, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSMutableString *name = [NSMutableString stringWithString:@"John"];<span></span></pre></td></tr><tr><td scope="row"><pre>    [name appendString:@"ny"];   // same object, but now represents "Johnny"<span></span></pre></td></tr></table></div><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW9" title="Format Strings Are Used to Build Strings from Other Objects or Values"></a><h4 class="jump">Format Strings Are Used to Build Strings from Other Objects or Values</h4><p>If you need to build a string containing variable values, you need to work with a <strong>format string</strong>. This allows you to use format specifiers to indicate how the values are inserted:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int magicNumber = ...<span></span></pre></td></tr><tr><td scope="row"><pre>    NSString *magicString = [NSString stringWithFormat:@"The magic number is %i", magicNumber];<span></span></pre></td></tr></table></div><p>The available format specifiers are described in <span class="content_text"><a href="../../Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265" data-renderer-version="1" target="_self">String Format Specifiers</a></span>. For more information about strings in general, see the <em><a href="../../Strings/introStrings.html#//apple_ref/doc/uid/10000035i" data-renderer-version="1" target="_self">String Programming Guide</a></em>.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW7" title="Numbers Are Represented by Instances of the NSNumber Class"></a><h3 class="jump">Numbers Are Represented by Instances of the NSNumber Class</h3><p>The <code>NSNumber</code> class is used to represent any of the basic C scalar types, including <code>char</code>, <code>double</code>, <code>float</code>, <code>int</code>, <code>long</code>, <code>short</code>, and the <code>unsigned</code> variants of each, as well as the Objective-C Boolean type, <code>BOOL</code>.</p><p>As with <code>NSString</code>, you have a variety of options to create <code>NSNumber</code> instances, including allocation and initialization or the class factory methods:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSNumber *magicNumber = [[NSNumber alloc] initWithInt:42];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *unsignedNumber = [[NSNumber alloc] initWithUnsignedInt:42u];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *longNumber = [[NSNumber alloc] initWithLong:42l];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *boolNumber = [[NSNumber alloc] initWithBOOL:YES];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *simpleFloat = [NSNumber numberWithFloat:3.14f];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *betterDouble = [NSNumber numberWithDouble:3.1415926535];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *someChar = [NSNumber numberWithChar:'T'];<span></span></pre></td></tr></table></div><p>It’s also possible to create <code>NSNumber</code> instances using Objective-C literal syntax:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSNumber *magicNumber = @42;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *unsignedNumber = @42u;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *longNumber = @42l;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *boolNumber = @YES;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *simpleFloat = @3.14f;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *betterDouble = @3.1415926535;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *someChar = @'T';<span></span></pre></td></tr></table></div><p>These examples are equivalent to using the <code>NSNumber</code> class factory methods.</p><p>Once you’ve created an <code>NSNumber</code> instance it’s possible to request the scalar value using one of the accessor methods:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int scalarMagic = [magicNumber intValue];<span></span></pre></td></tr><tr><td scope="row"><pre>    unsigned int scalarUnsigned = [unsignedNumber unsignedIntValue];<span></span></pre></td></tr><tr><td scope="row"><pre>    long scalarLong = [longNumber longValue];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL scalarBool = [boolNumber boolValue];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    float scalarSimpleFloat = [simpleFloat floatValue];<span></span></pre></td></tr><tr><td scope="row"><pre>    double scalarBetterDouble = [betterDouble doubleValue];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    char scalarChar = [someChar charValue];<span></span></pre></td></tr></table></div><p>The <code>NSNumber</code> class also offers methods to work with the additional Objective-C primitive types. If you need to create an object representation of the scalar <code>NSInteger</code> and <code>NSUInteger</code> types, for example, make sure you use the correct methods:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSInteger anInteger = 64;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSUInteger anUnsignedInteger = 100;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *firstInteger = [[NSNumber alloc] initWithInteger:anInteger];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSNumber *secondInteger = [NSNumber numberWithUnsignedInteger:anUnsignedInteger];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSInteger integerCheck = [firstInteger integerValue];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSUInteger unsignedCheck = [secondInteger unsignedIntegerValue];<span></span></pre></td></tr></table></div><p>All <code>NSNumber</code> instances are immutable, and there is no mutable subclass; if you need a different number, simply use another <code>NSNumber</code> instance.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40011210-CH7-SW10" title="Note"></a><p><strong>Note:</strong>&nbsp;<code>NSNumber</code> is actually a class cluster. This means that when you create an instance at runtime, you’ll get a suitable concrete subclass to hold the provided value. Just treat the created object as an instance of <code>NSNumber</code>.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW8" title="Represent Other Values Using Instances of the NSValue Class"></a><h3 class="jump">Represent Other Values Using Instances of the NSValue Class</h3><p>The <code>NSNumber</code> class is itself a subclass of the basic <code>NSValue</code> class, which provides an object wrapper around a single value or data item. In addition to the basic C scalar types, <code>NSValue</code> can also be used to represent pointers and structures.</p><p>The <code>NSValue</code> class offers various factory methods to create a value with a given standard structure, which makes it easy to create an instance to represent, for example, an <code>NSRange</code>, like the example from earlier in the chapter:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSString *mainString = @"This is a long string";<span></span></pre></td></tr><tr><td scope="row"><pre>    NSRange substringRange = [mainString rangeOfString:@"long"];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSValue *rangeValue = [NSValue valueWithRange:substringRange];<span></span></pre></td></tr></table></div><p>It’s also possible to create <code>NSValue</code> objects to represent custom structures. If you have a particular need to use a C structure (rather than an Objective-C object) to store information, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>typedef struct {<span></span></pre></td></tr><tr><td scope="row"><pre>    int i;<span></span></pre></td></tr><tr><td scope="row"><pre>    float f;<span></span></pre></td></tr><tr><td scope="row"><pre>} MyIntegerFloatStruct;<span></span></pre></td></tr></table></div><p>you can create an <code>NSValue</code> instance by providing a pointer to the structure as well as an encoded Objective-C type. The <code>@encode()</code> compiler directive is used to create the correct Objective-C type, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    struct MyIntegerFloatStruct aStruct;<span></span></pre></td></tr><tr><td scope="row"><pre>    aStruct.i = 42;<span></span></pre></td></tr><tr><td scope="row"><pre>    aStruct.f = 3.14;<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    NSValue *structValue = [NSValue value:&amp;aStruct<span></span></pre></td></tr><tr><td scope="row"><pre>                             withObjCType:@encode(MyIntegerFloatStruct)];<span></span></pre></td></tr></table></div><p>The standard C reference operator (<code>&amp;</code>) is used to provide the address of <code>aStruct</code> for the <code>value</code> parameter.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW11" title="Most Collections Are Objects"></a><h2 class="jump">Most Collections Are Objects</h2><p>Although it’s possible to use a C array to hold a collection of scalar values, or even object pointers, most collections in Objective-C code are instances of one of the Cocoa and Cocoa Touch collection classes, like <code>NSArray</code>, <code>NSSet</code> and <code>NSDictionary</code>.</p><p>These classes are used to manage groups of objects, which means any item you wish to add to a collection must be an instance of an Objective-C class. If you need to add a scalar value, you must first create a suitable <code>NSNumber</code> or <code>NSValue</code> instance to represent it.</p><p>Rather than somehow maintaining a separate copy of each collected object, the collection classes use strong references to keep track of their contents. This means that any object that you add to a collection will be kept alive at least as long as the collection is kept alive, as described in <span class="content_text"><a href="../EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW3" data-renderer-version="1">Manage the Object Graph through Ownership and Responsibility</a></span>.</p><p>In addition to keeping track of their contents, each of the Cocoa and Cocoa Touch collection classes make it easy to perform certain tasks, such as enumeration, accessing specific items, or finding out whether a particular object is part of the collection. </p><p>The basic <code>NSArray</code>, <code>NSSet</code> and <code>NSDictionary</code> classes are immutable, which means their contents are set at creation. Each also has a mutable subclass to allow you to add or remove objects at will.</p><p>For more information on the different collection classes available in Cocoa and Cocoa Touch, see <em><a href="../../Collections/Collections.html#//apple_ref/doc/uid/10000034i" data-renderer-version="1" target="_self">Collections Programming Topics</a></em>.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW13" title="Arrays Are Ordered Collections"></a><h3 class="jump">Arrays Are Ordered Collections</h3><p>An <code>NSArray</code> is used to represent an <em class="newTerm">ordered collection</em> of objects. The only requirement is that each item is an Objective-C object— there’s no requirement for each object to be an instance of the same class.</p><p>To maintain order in the array, each element is stored at a zero-based index, as shown in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40011210-CH7-SW12" data-renderer-version="1">Figure 6-1</a></span>.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40011210-CH7-SW12" title="Figure 6-1An Array of Objective-C Objects"></a><figcaption><strong class="caption_number">Figure 6-1</strong>&nbsp;&nbsp;An Array of Objective-C Objects</figcaption><img src="../Art/orderedarrayofobjects.png" alt="" width="234" height="223"></figure><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW16" title="Creating Arrays"></a><h4 class="jump">Creating Arrays</h4><p>As with the value classes described earlier in this chapter, you can create an array through allocation and initialization, class factory methods, or literal syntax.</p><p>There are a variety of different initialization and factory methods available, depending on the number of objects:</p><div class="codesample clear"><table><tr><td scope="row"><pre>+ (id)arrayWithObject:(id)anObject;<span></span></pre></td></tr><tr><td scope="row"><pre>+ (id)arrayWithObjects:(id)firstObject, ...;<span></span></pre></td></tr><tr><td scope="row"><pre>- (id)initWithObjects:(id)firstObject, ...;<span></span></pre></td></tr></table></div><p>The <code>arrayWithObjects:</code> and <code>initWithObjects:</code> methods both take a nil-terminated, variable number of arguments, which means that you must include <code>nil</code> as the last value, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSArray *someArray =<span></span></pre></td></tr><tr><td scope="row"><pre>  [NSArray arrayWithObjects:someObject, someString, someNumber, someValue, nil];<span></span></pre></td></tr></table></div><p>This example creates an array like the one shown earlier, in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40011210-CH7-SW12" data-renderer-version="1">Figure 6-1</a></span>. The first object, <code>someObject</code>, will have an array index of <code>0</code>; the last object, <code>someValue</code>, will have an index of <code>3</code>.</p><p>It’s possible to truncate the list of items unintentionally if one of the provided values is <code>nil</code>, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    id firstObject = @"someString";<span></span></pre></td></tr><tr><td scope="row"><pre>    id secondObject = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    id thirdObject = @"anotherString";<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *someArray =<span></span></pre></td></tr><tr><td scope="row"><pre>  [NSArray arrayWithObjects:firstObject, secondObject, thirdObject, nil];<span></span></pre></td></tr></table></div><p>In this case, <code>someArray</code> will contain only <code>firstObject</code>, because the <code>nil</code> <code>secondObject</code> would be interpreted as the end of the list of items.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW17" title="Literal Syntax"></a><h5 class="jump">Literal Syntax</h5><p>It’s also possible to create an array using an Objective-C literal, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSArray *someArray = @[firstObject, secondObject, thirdObject];<span></span></pre></td></tr></table></div><p>You should not terminate the list of objects with <code>nil</code> when using this literal syntax, and in fact <code>nil</code> is an invalid value. You’ll get an exception at runtime if you try to execute the following code, for example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    id firstObject = @"someString";<span></span></pre></td></tr><tr><td scope="row"><pre>    id secondObject = nil;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *someArray = @[firstObject, secondObject];<span></span></pre></td></tr><tr><td scope="row"><pre>    // exception: "attempt to insert nil object"<span></span></pre></td></tr></table></div><p>If you do need to represent a <code>nil</code> value in one of the collection classes, you should use the <code>NSNull</code> singleton class, as described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40011210-CH7-SW34" data-renderer-version="1">Represent nil with NSNull</a></span>.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW18" title="Querying Array Objects"></a><h4 class="jump">Querying Array Objects</h4><p>Once you’ve created an array, you can query it for information like the number of objects, or whether it contains a given item:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSUInteger numberOfItems = [someArray count];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    if ([someArray containsObject:someString]) {<span></span></pre></td></tr><tr><td scope="row"><pre>        ...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>You can also query the array for an item at a given index. You’ll get an out-of-bounds exception at runtime if you attempt to request an invalid index, so you should always check the number of items first:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    if ([someArray count] &gt; 0) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"First item is: %@", [someArray objectAtIndex:0]);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>This example checks whether the number of items is greater than zero. If so, it logs a description of the first item, which has an index of zero.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW35" title="Subscripting"></a><h5 class="jump">Subscripting</h5><p>There’s also a subscript syntax alternative to using <code>objectAtIndex:</code>, which is just like accessing a value in a standard C array. The previous example could be re-written like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    if ([someArray count] &gt; 0) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"First item is: %@", someArray[0]);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW19" title="Sorting Array Objects"></a><h4 class="jump">Sorting Array Objects</h4><p>The <code>NSArray</code> class also offers a variety of methods to sort its collected objects. Because <code>NSArray</code> is immutable, each of these methods returns a new array containing the items in the sorted order.</p><p>As an example, you can sort an array of strings by the result of calling <code>compare:</code> on each string, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSArray *unsortedStrings = @[@"gammaString", @"alphaString", @"betaString"];<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *sortedStrings =<span></span></pre></td></tr><tr><td scope="row"><pre>                 [unsortedStrings sortedArrayUsingSelector:@selector(compare:)];<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW20" title="Mutability"></a><h4 class="jump">Mutability</h4><p>Although the <code>NSArray</code> class itself is immutable, this has no bearing on any collected objects. If you add a mutable string to an immutable array, for example, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>NSMutableString *mutableString = [NSMutableString stringWithString:@"Hello"];<span></span></pre></td></tr><tr><td scope="row"><pre>NSArray *immutableArray = @[mutableString];<span></span></pre></td></tr></table></div><p>there’s nothing to stop you from mutating the string:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    if ([immutableArray count] &gt; 0) {<span></span></pre></td></tr><tr><td scope="row"><pre>        id string = immutableArray[0];<span></span></pre></td></tr><tr><td scope="row"><pre>        if ([string isKindOfClass:[NSMutableString class]]) {<span></span></pre></td></tr><tr><td scope="row"><pre>            [string appendString:@" World!"];<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>If you need to be able to add or remove objects from an array after initial creation, you’ll need to use <code>NSMutableArray</code>, which adds a variety of methods to add , remove or replace one or more objects:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSMutableArray *mutableArray = [NSMutableArray array];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mutableArray addObject:@"gamma"];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mutableArray addObject:@"alpha"];<span></span></pre></td></tr><tr><td scope="row"><pre>    [mutableArray addObject:@"beta"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    [mutableArray replaceObjectAtIndex:0 withObject:@"epsilon"];<span></span></pre></td></tr></table></div><p>This example creates an array that ends up with the objects <code>@"epsilon"</code>, <code>@"alpha"</code>, <code>@"beta"</code>.</p><p>It’s also possible to sort a mutable array in place, without creating a secondary array:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    [mutableArray sortUsingSelector:@selector(caseInsensitiveCompare:)];<span></span></pre></td></tr></table></div><p>In this case the contained items will be sorted into the ascending, case insensitive order of <code>@"alpha"</code>, <code>@"beta"</code>, <code>@"epsilon"</code>.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW21" title="Sets Are Unordered Collections"></a><h3 class="jump">Sets Are Unordered Collections</h3><p>An <code>NSSet</code> is similar to an array, but maintains an unordered group of <strong>distinct</strong> objects, as shown in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40011210-CH7-SW14" data-renderer-version="1">Figure 6-2</a></span>.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40011210-CH7-SW14" title="Figure 6-2A Set of Objects"></a><figcaption><strong class="caption_number">Figure 6-2</strong>&nbsp;&nbsp;A Set of Objects</figcaption><img src="../Art/unorderedsetofobjects.png" alt="" width="338" height="218"></figure><p>Because sets don’t maintain order, they offer a performance improvement over arrays when it comes to testing for membership.</p><p>The basic <code>NSSet</code> class is again immutable, so its contents must be specified at creation, using either allocation and initialization or a class factory method, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSSet *simpleSet =<span></span></pre></td></tr><tr><td scope="row"><pre>      [NSSet setWithObjects:@"Hello, World!", @42, aValue, anObject, nil];<span></span></pre></td></tr></table></div><p>As with <code>NSArray</code>, the <code>initWithObjects:</code> and <code>setWithObjects:</code> methods both take a nil-terminated, variable number of arguments. The mutable <code>NSSet</code> subclass is <code>NSMutableSet</code>.</p><p>Sets only store one reference to an individual object, even if you try and add an object more than once:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSNumber *number = @42;<span></span></pre></td></tr><tr><td scope="row"><pre>    NSSet *numberSet =<span></span></pre></td></tr><tr><td scope="row"><pre>      [NSSet setWithObjects:number, number, number, number, nil];<span></span></pre></td></tr><tr><td scope="row"><pre>    // numberSet only contains one object<span></span></pre></td></tr></table></div><p>For more information on sets, see <span class="content_text"><a href="../../Collections/Articles/Sets.html#//apple_ref/doc/uid/20000136" data-renderer-version="1" target="_self">Sets: Unordered Collections of Objects</a></span>.</p></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW22" title="Dictionaries Collect Key-Value Pairs"></a><h3 class="jump">Dictionaries Collect Key-Value Pairs</h3><p>Rather than simply maintaining an ordered or unordered collection of objects, an <code>NSDictionary</code> stores objects against given keys, which can then be used for retrieval.</p><p>It’s best practice to use string objects as dictionary keys, as shown in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40011210-CH7-SW15" data-renderer-version="1">Figure 6-3</a></span>.</p><figure class="figure"><a name="//apple_ref/doc/uid/TP40011210-CH7-SW15" title="Figure 6-3A Dictionary of Objects"></a><figcaption><strong class="caption_number">Figure 6-3</strong>&nbsp;&nbsp;A Dictionary of Objects</figcaption><img src="../Art/dictionaryofobjects.png" class="wide-image" alt="" width="678" height="161"><img src="../Art/dictionaryofobjects.png" class="ipad-scaled-image" alt="" width="670" height="159"></figure><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40011210-CH7-SW23" title="Note"></a><p><strong>Note:</strong>&nbsp;It’s possible to use other objects as keys, but it’s important to note that each key is copied for use by a dictionary and so must support <code>NSCopying</code>.</p><p>If you wish to be able to use Key-Value Coding, however, as described in <em><a href="../../KeyValueCoding/index.html#//apple_ref/doc/uid/10000107i" data-renderer-version="2" target="_self">Key-Value Coding Programming Guide</a></em>, you must use string keys for dictionary objects.</p><p></p></aside></div><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW24" title="Creating Dictionaries"></a><h4 class="jump">Creating Dictionaries</h4><p>You can create dictionaries using either allocation and initialization, or class factory methods, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSDictionary *dictionary = [NSDictionary dictionaryWithObjectsAndKeys:<span></span></pre></td></tr><tr><td scope="row"><pre>                   someObject, @"anObject",<span></span></pre></td></tr><tr><td scope="row"><pre>             @"Hello, World!", @"helloString",<span></span></pre></td></tr><tr><td scope="row"><pre>                          @42, @"magicNumber",<span></span></pre></td></tr><tr><td scope="row"><pre>                    someValue, @"aValue",<span></span></pre></td></tr><tr><td scope="row"><pre>                             nil];<span></span></pre></td></tr></table></div><p>Note that for the <code>dictionaryWithObjectsAndKeys:</code> and <code>initWithObjectsAndKeys:</code> methods, each object is specified before its key, and again, the list of objects and keys must be nil-terminated.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW25" title="Literal Syntax"></a><h5 class="jump">Literal Syntax</h5><p>Objective-C also offers a literal syntax for dictionary creation, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSDictionary *dictionary = @{<span></span></pre></td></tr><tr><td scope="row"><pre>                  @"anObject" : someObject,<span></span></pre></td></tr><tr><td scope="row"><pre>               @"helloString" : @"Hello, World!",<span></span></pre></td></tr><tr><td scope="row"><pre>               @"magicNumber" : @42,<span></span></pre></td></tr><tr><td scope="row"><pre>                    @"aValue" : someValue<span></span></pre></td></tr><tr><td scope="row"><pre>    };<span></span></pre></td></tr></table></div><p>Note that for dictionary literals, the key is specified before its object and is not nil-terminated.</p></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW26" title="Querying Dictionaries"></a><h4 class="jump">Querying Dictionaries</h4><p>Once you’ve created a dictionary, you can ask it for the object stored against a given key, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSNumber *storedNumber = [dictionary objectForKey:@"magicNumber"];<span></span></pre></td></tr></table></div><p>If the object isn’t found, the <code>objectForKey:</code> method will return <code>nil</code>.</p><p>There’s also a subscript syntax alternative to using <code>objectForKey:</code>, which looks like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSNumber *storedNumber = dictionary[@"magicNumber"];<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW27" title="Mutability"></a><h4 class="jump">Mutability</h4><p>If you need to add or remove objects from a dictionary after creation, you need to use the <code>NSMutableDictionary</code> subclass, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    [dictionary setObject:@"another string" forKey:@"secondString"];<span></span></pre></td></tr><tr><td scope="row"><pre>    [dictionary removeObjectForKey:@"anObject"];<span></span></pre></td></tr></table></div></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW34" title="Represent nil with NSNull"></a><h3 class="jump">Represent nil with NSNull</h3><p>It’s not possible to add <code>nil</code> to the collection classes described in this section because <code>nil</code> in Objective-C means “no object.” If you need to represent “no object” in a collection, you can use the <code>NSNull</code> class:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSArray *array = @[ @"string", @42, [NSNull null] ];<span></span></pre></td></tr></table></div><p><code>NSNull</code> is a singleton class, which means that the <code>null</code> method will always return the same instance. This means that you can check whether an object in an array is equal to the shared <code>NSNull</code> instance:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    for (id object in array) {<span></span></pre></td></tr><tr><td scope="row"><pre>        if (object == [NSNull null]) {<span></span></pre></td></tr><tr><td scope="row"><pre>            NSLog(@"Found a null object");<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div></section></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW29" title="Use Collections to Persist Your Object Graph"></a><h2 class="jump">Use Collections to Persist Your Object Graph</h2><p>The <code>NSArray</code> and <code>NSDictionary</code> classes make it easy to write their contents directly to disk, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSURL *fileURL = ...<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *array = @[@"first", @"second", @"third"];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>    BOOL success = [array writeToURL:fileURL atomically:YES];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (!success) {<span></span></pre></td></tr><tr><td scope="row"><pre>        // an error occured...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>If every contained object is one of the <em class="newTerm">property list</em> types (<code>NSArray</code>, <code>NSDictionary</code>, <code>NSString</code>, <code>NSData</code>, <code>NSDate</code> and <code>NSNumber</code>), it’s possible to recreate the entire hierarchy from disk, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    NSURL *fileURL = ...<span></span></pre></td></tr><tr><td scope="row"><pre>    NSArray *array = [NSArray arrayWithContentsOfURL:fileURL];<span></span></pre></td></tr><tr><td scope="row"><pre>    if (!array) {<span></span></pre></td></tr><tr><td scope="row"><pre>        // an error occurred...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>For more information on property lists, see <em><a href="../../PropertyLists/Introduction/Introduction.html#//apple_ref/doc/uid/10000048i" data-renderer-version="1" target="_self">Property List Programming Guide</a></em>.</p><p>If you need to persist other types of objects than just the standard property list classes shown above, you can use an archiver object, such as <code>NSKeyedArchiver</code>, to create an archive of the collected objects.</p><p>The only requirement to create an archive is that each object must support the <code>NSCoding</code> protocol. This means that each object must know how to <em>encode</em> itself to an archive (by implementing the <code>encodeWithCoder:</code> method) and <em>decode</em> itself when read from an existing archive (the <code>initWithCoder:</code> method).</p><p>The <code>NSArray</code>, <code>NSSet</code> and <code>NSDictionary</code> classes, and their mutable subclasses, all support <code>NSCoding</code>, which means you can persist complex hierarchies of objects using an archiver. If you use Interface Builder to lay out windows and views, for example, the resulting nib file is just an archive of the object hierarchy that you’ve created visually. At runtime, the nib file is unarchived to a hierarchy of objects using the relevant classes.</p><p>For more information on Archives, see <em><a href="../../Archiving/Archiving.html#//apple_ref/doc/uid/10000047i" data-renderer-version="1" target="_self">Archives and Serializations Programming Guide</a></em>.</p></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW28" title="Use the Most Efficient Collection Enumeration Techniques"></a><h2 class="jump">Use the Most Efficient Collection Enumeration Techniques</h2><p>Objective-C and Cocoa or Cocoa Touch offer a variety of ways to enumerate the contents of a collection. Although it’s possible to use a traditional C <code>for</code> loop to iterate over the contents, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int count = [array count];<span></span></pre></td></tr><tr><td scope="row"><pre>    for (int index = 0; index &lt; count; index++) {<span></span></pre></td></tr><tr><td scope="row"><pre>        id eachObject = [array objectAtIndex:index];<span></span></pre></td></tr><tr><td scope="row"><pre>        ...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>it’s best practice to use one of the other techniques described in this section.</p><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW30" title="Fast Enumeration Makes It Easy to Enumerate a Collection"></a><h3 class="jump">Fast Enumeration Makes It Easy to Enumerate a Collection</h3><p>Many collection classes conform to the <code>NSFastEnumeration</code> protocol, including <code>NSArray</code>, <code>NSSet</code> and <code>NSDictionary</code>. This means that you can use fast enumeration, an Objective-C language-level feature.</p><p>The fast enumeration syntax to enumerate the contents of an array or set looks like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    for (&lt;Type&gt; &lt;variable&gt; in &lt;collection&gt;) {<span></span></pre></td></tr><tr><td scope="row"><pre>        ...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>As an example, you might use fast enumeration to log a description of each object in an array, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    for (id eachObject in array) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"Object: %@", eachObject);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>The <code>eachObject</code> variable is set automatically to the current object for each pass through the loop, so one log statement appears per object.</p><p>If you use fast enumeration with a dictionary, you iterate over the dictionary <em>keys</em>, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    for (NSString *eachKey in dictionary) {<span></span></pre></td></tr><tr><td scope="row"><pre>        id object = dictionary[eachKey];<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"Object: %@ for key: %@", object, eachKey);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>Fast enumeration behaves much like a standard C <code>for</code> loop, so you can use the <code>break</code> keyword to interrupt the iteration, or <code>continue</code> to advance to the next element.</p><p>If you are enumerating an ordered collection, the enumeration proceeds in that order. For an <code>NSArray</code>, this means the first pass will be for the object at index <code>0</code>, the second for object at index <code>1</code>, etc. If you need to keep track of the current index, simply count the iterations as they occur:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    int index = 0;<span></span></pre></td></tr><tr><td scope="row"><pre>    for (id eachObject in array) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"Object at index %i is: %@", index, eachObject);<span></span></pre></td></tr><tr><td scope="row"><pre>        index++;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>You cannot mutate a collection during fast enumeration, even if the collection is mutable. If you attempt to add or remove a collected object from within the loop, you’ll generate a runtime exception.</p></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW31" title="Most Collections Also Support Enumerator Objects"></a><h3 class="jump">Most Collections Also Support Enumerator Objects</h3><p>It’s also possible to enumerate many Cocoa and Cocoa Touch collections by using an <code>NSEnumerator</code> object.</p><p>You can ask an <code>NSArray</code>, for example, for an <code>objectEnumerator</code> or a <code>reverseObjectEnumerator</code>. It’s possible to use these objects with fast enumeration, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    for (id eachObject in [array reverseObjectEnumerator]) {<span></span></pre></td></tr><tr><td scope="row"><pre>        ...<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>In this example, the loop will iterate over the collected objects in reverse order, so the last object will be first, and so on.</p><p>It’s also possible to iterate through the contents by calling the enumerator’s <code>nextObject</code> method repeatedly, like this:</p><div class="codesample clear"><table><tr><td scope="row"><pre>    id eachObject;<span></span></pre></td></tr><tr><td scope="row"><pre>    while ( (eachObject = [enumerator nextObject]) ) {<span></span></pre></td></tr><tr><td scope="row"><pre>        NSLog(@"Current object is: %@", eachObject);<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr></table></div><p>In this example, a <code>while</code> loop is used to set the <code>eachObject</code> variable to the next object for each pass through the loop. When there are no more objects left, the <code>nextObject</code> method will return <code>nil</code>, which evaluates as a logical value of false so the loop stops.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40011210-CH7-SW32" title="Note"></a><p><strong>Note:</strong>&nbsp;Because it’s a common programmer error to use the C assignment operator (<code>=</code>) when you mean the equality operator (<code>==</code>), the compiler will warn you if you set a variable in a conditional branch or loop, like this:</p><p><div class="codesample clear"><table><tr><td scope="row"><pre>if (someVariable = YES) {<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div>If you really do mean to reassign a variable (the logical value of the overall assignment is the final value of the left hand side), you can indicate this by placing the assignment in parentheses, like this:</p><p><div class="codesample clear"><table><tr><td scope="row"><pre>if ( (someVariable = YES) ) {<span></span></pre></td></tr><tr><td scope="row"><pre>    ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></p></aside></div><p>As with fast enumeration, you cannot mutate a collection while enumerating. And, as you might gather from the name, it’s faster to use fast enumeration than to use an enumerator object manually.</p></section><section><a name="//apple_ref/doc/uid/TP40011210-CH7-SW33" title="Many Collections Support Block-Based Enumeration"></a><h3 class="jump">Many Collections Support Block-Based Enumeration</h3><p>It’s also possible to enumerate <code>NSArray</code>, <code>NSSet</code> and <code>NSDictionary</code> using blocks. Blocks are covered in detail in the next chapter.</p></section></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='../WorkingwithBlocks/WorkingwithBlocks.html'>Next</a><a class='previousLink' rel='prev' href='../WorkingwithProtocols/WorkingwithProtocols.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2014 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2014-09-17</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/1260/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/library.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/feedback.js"></script>
</body>
</html>
