<!DOCTYPE html>
<html lang="en">
<head>
    <title>Loading Code at Runtime</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40001519">
    <meta id="document-version" name="document-version" content="3.3.1">
    <meta id="build" name="build" content="ded95564c405529dbbbe590063edd114" />
    <meta id="chapterId" name="chapterId" content="TP40001830">
    <meta id="date" name="date" content="2009-02-04">
    <meta id="description" name="description" content="Explains the use of the OS X runtime architecture, including program types, loading and executing code, and using libraries and plug-ins.">
    <meta id="book-title" name="book-title" content="Mach-O Programming Topics">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/General}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Mach-O Programming Topics: Loading Code at Runtime">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1260">
    <link id="book-index-page" rel="Start" title="Mach-O Programming Topics" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="indirect_addressing.html">
    <link id="previous-page" rel="Prev" type="text/html" href="executing_files.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40001830" title="Loading Code at Runtime"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Mach-O Programming Topics</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='indirect_addressing.html'>Next</a><a class='previousLink' rel='prev' href='executing_files.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40001830-SW1" title="Loading Code at Runtime"></a><h1 id="pageTitle">Loading Code at Runtime</h1><p>You may need to use <em class="newTerm">dynamic shared libraries</em>, which store reusable code, in your applications to take advantage of functionality used by more than one application. For example, when you develop Cocoa applications, at a minimum your application links against the Foundation and Application Kit frameworks. Through this practice, your program can automatically take advantage of improvements in those frameworks as your application’s users update the system software in their computers. See <span class="content_text"><a href="building_files.html#//apple_ref/doc/uid/TP40001828-97030" data-renderer-version="1">The Products—Types of Mach-O Files You Can Build</a></span> for more information on dynamic shared libraries.</p><p>If you develop shared libraries and distribute them as framework bundles to be used by other developers in their applications, you should ensure changes you make to the libraries (to implement new features, for example) don’t break current versions of the applications that use them. You maintain compatibility by exposing the same programming interface to client applications between upgrades of the shared libraries.</p><p>When a change to your framework’s API is required to implement a feature, you should make available in the same framework bundle the last version of the framework that exposes the API current client applications expect, in addition to the version of the framework that exposes the new, incompatible API. If you follow this guideline, developers of client applications don’t have to revise them every time your framework’s API changes. And developers that choose to update their applications can take advantage of the features you added to the framework. To ensure that earlier versions of your framework’s client applications don’t break when the framework is updated, you must package the shared libraries and their resources within the framework bundle in a way that allows earlier versions of client applications to continue using the versions of the framework that they understand.</p><p>This article describes how you can load code at runtime. It shows the benefits of using shared libraries and explains how they are packaged inside frameworks to maintain client-application compatibility across updates to the frameworks. It also describes how the OS X runtime environment takes advantage of bundles to allow you to load plug-in code at runtime.</p><section><a name="//apple_ref/doc/uid/TP40001830-96836" title="Using Shared Libraries and Frameworks"></a><a name="//apple_ref/doc/uid/TP40001830-96836-TPXREF109" title="Using Shared Libraries and Frameworks"></a><h2 class="jump">Using Shared Libraries and Frameworks</h2><p>Programmers often refer to dynamic shared libraries<a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_47"></a> using different names, such as <em>dynamically linked shared libraries</em>, <em>dynamic libraries</em>, <em>DLLs</em><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_48"></a>, <em>dylibs</em>, or just <em>shared libraries</em>. In OS X, all these names refer to the same thing: a library of code dynamically loaded into a process at runtime.</p><p>Dynamic shared libraries allow the operating system as a whole to use memory efficiently. Each process in OS X has its own virtual address space. The OS X kernel allows regions of logical memory to be mapped into multiple processes at different addresses. The dynamic linker takes advantage of this feature by mapping the same read-only copy of the shared library code into the address space of each process. The result is that only one physical copy of a shared library is in memory at any time, even though many processes may use it at the same time. Data, such as variables and constants, contained by a shared library is mapped into each client process using the kernel’s copy-on-write optimization capability. With copy-on-write, the data is shared among processes until one of the processes attempts to change the data. At that point, the kernel creates a writable copy of the data private to that process. The other processes continue to use the read-only shared copy. Thus, additional memory for data is allocated only when absolutely necessary.</p><p>Dynamic shared libraries also provide a way for programs to seamlessly benefit from system upgrades. When the system is upgraded, the shared libraries are updated, but the programs need not be. Since they are dynamically bound to the shared libraries, the programs can continue to call the same functions and the updated implementation of the shared libraries is executed. For more information on dynamic-library development and usage, see <em><a href="../../DynamicLibraries/000-Introduction/Introduction.html#//apple_ref/doc/uid/TP40001869" data-renderer-version="1" target="_self">Dynamic Library Programming Topics</a></em>.</p><section><a name="//apple_ref/doc/uid/TP40001830-96883" title="Maintaining Client Application Compatibility"></a><a name="//apple_ref/doc/uid/TP40001830-96883-TPXREF122" title="Maintaining Client Application Compatibility"></a><h3 class="jump">Maintaining Client Application Compatibility</h3><p>This is an overview of various parameters that affect compatibility with client applications. You can set these parameters at build time. For a more detailed discussion of this topic, see <span class="content_text"><a href="../../DynamicLibraries/100-Articles/DynamicLibraryDesignGuidelines.html#//apple_ref/doc/uid/TP40002013" data-renderer-version="1" target="_self">Dynamic Library Design Guidelines</a></span> in <em><a href="../../DynamicLibraries/000-Introduction/Introduction.html#//apple_ref/doc/uid/TP40001869" data-renderer-version="1" target="_self">Dynamic Library Programming Topics</a></em>.</p><p>Shared libraries<a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_49"></a> have two version numbers, which allow you to create versions of a shared library that are <em class="newTerm">binary compatible</em> (that is, they do not require client programs to be recompiled) with the functions exported by the earlier versions of a library:</p><ul class="ul"><li class="li"><p>The <em class="newTerm">current version</em> of the library specifies the current version number of the library’s implementation. A client program can examine this version number to find out the exact version of the library, which can be useful for checking for bug fixes and feature additions. The shared library can also examine the version number that the client program originally linked against, which can be useful for maintaining backwards compatibility.</p></li><li class="li"><p>The <em class="newTerm">compatibility version</em> of the library specifies the version of the library’s API that the shared library claims to be backward-compatible with. If the compatibility version of the shared library is more recent than the version recorded with the client program, the program fails to link and an error occurs.</p></li></ul><p>The <em class="newTerm">install name</em><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_50"></a> is the pathname used by the dynamic linker to find a shared library at runtime. The install name is defined by the shared library and recorded into the client program by the static linker.</p></section><section><a name="//apple_ref/doc/uid/TP40001830-96992" title="Packaging a Shared Library as a Framework"></a><a name="//apple_ref/doc/uid/TP40001830-96992-TPXREF115" title="Packaging a Shared Library as a Framework"></a><h3 class="jump">Packaging a Shared Library as a Framework</h3><p>A <em class="newTerm">framework</em> is a shared library packaged with associated resources, such as headers, localized strings, and documentation, installed in a standard folder hierarchy, usually in a standard location in the file system. The folders usually contain related header files, documentation in any format, and resource files. A framework may contain multiple versions of itself, and each version may have its own set of resources, documentation, and header files.</p><p>From a tools perspective, a framework is a shared library whose install name ends in the form <em>frameworkName</em><code>.framework/Versions/</code><em>versionName</em><code>/</code><em>frameworkName</em> or the form <em>frameworkName</em><code>.framework/</code><em>frameworkName</em>.</p><p>You create a framework by building a normal dynamic shared library into a folder with the same name and the <code>.framework</code> extension. For example, to create a framework named Chaos, place a dynamic shared library named <code>Chaos</code> in a folder called <code>Chaos.framework</code>. You can create other folders inside this folder to store related resources, such as header files, documentation, and images (the standard folder names for these are called, respectively, <code>Headers</code>, <code>Documentation</code>, and <code>Resources</code>).</p><p>You can locate private frameworks and shared libraries in an application package using a relative-path install name beginning with <code>@executable_path</code>, such as <code>@executable_path/../Frameworks/MyFramework.framework</code>. This is useful for sharing functionality with plug-ins (bundles).</p><p>Apple follows a standard framework versioning convention, different from the shared library version numbering system. By versioning your framework, you can ship older versions of your framework alongside newer versions, to allow older clients to continue functioning, while still allowing you to advance the design of the framework in ways not compatible with older clients.</p><p>To version your framework, create a parent folder inside the framework called <code>Versions</code>, create a subfolder in <code>Versions</code> using a naming scheme of your choice, and build the framework shared library and other folders in this subfolder. Then create symbolic links in the framework’s root folder to point to the shared library and folders. When you need to create a version of your framework that is not compatible with the previous version, build it into a new directory in the versions directory and update the symlinks to point to the new version. When a client links to a versioned framework, the install name recorded in the client executable includes the full path to the shared library executable, and the dynamic linker, thus, loads only that version.</p><p>For example, a client links to a framework called <code>Peace.framework</code>, and the symlinks in <code>Peace.framework</code> point to the latest version, which is named <code>B</code>.The install name of the framework ends with <code>Peace.framework/Versions/B/Peace</code>. The static linker records this install name in the client. When the client is loaded, the dynamic linker attempts to load the shared library with this install name. Note that, while frameworks that ship with the system usually name successive versions with consecutive letters of the English alphabet (A through Z), you can use any name you want.</p><p>A framework developer can build a simple, versioned framework in four steps:</p><ol class="ol"><li class="li"><p>Create the framework version directory.</p></li><li class="li"><p>Compile the framework executable into the framework version directory.</p></li><li class="li"><p>Create a symbolic link named <code>Current</code> that points to the framework version directory.</p></li><li class="li"><p>Create a symbolic link to the framework executable in the parent framework directory.</p></li></ol><p>The shell commands in <span class="content_text">Listing 1</span> builds a framework named <code>Bliss</code> from the C source files <code>Peace.c</code> and <code>Love.c</code>. The resulting framework has the install name <code>Bliss.framework/Versions/A/Bliss</code>.</p><a name="//apple_ref/doc/uid/TP40001830-97168-BCIJFHEB" title="Listing 1Building a framework"></a><p class="codesample clear"><a name="//apple_ref/doc/uid/TP40001830-97168" title="Listing 1Building a framework"></a><strong class="caption_number">Listing 1</strong>&nbsp;&nbsp;Building a framework</p><div class="codesample clear"><table><tr><td scope="row"><pre>gcc -c -o Peace.o Peace.c<span></span></pre></td></tr><tr><td scope="row"><pre>gcc -c -o Love.o Love.c<span></span></pre></td></tr><tr><td scope="row"><pre>mkdir -p Bliss.framework/Versions/A<span></span></pre></td></tr><tr><td scope="row"><pre>gcc -dynamiclib -o Bliss.framework/Versions/A/Bliss Peace.o Love.o<span></span></pre></td></tr><tr><td scope="row"><pre>cd ./Bliss.framework/Versions &amp;&amp; ln -sf A Current<span></span></pre></td></tr><tr><td scope="row"><pre>cd ./Bliss.framework &amp;&amp; ln -sf Versions/Current/Bliss Bliss<span></span></pre></td></tr></table></div><p><span class="content_text">Listing 2</span> demonstrates how to create a <em class="newTerm">private framework</em>—that is, a framework located in an application package. Specify the install name explicitly during the linking phase and prefix it with <code>@executable_path.</code> The install name of the resulting framework is <code>@executable_path/../Frameworks/Bliss.framework/Versions/A/Bliss</code>.</p><a name="//apple_ref/doc/uid/TP40001830-97228-BCIDFDCJ" title="Listing 2Building a private framework"></a><p class="codesample clear"><a name="//apple_ref/doc/uid/TP40001830-97228" title="Listing 2Building a private framework"></a><strong class="caption_number">Listing 2</strong>&nbsp;&nbsp;Building a private framework</p><div class="codesample clear"><table><tr><td scope="row"><pre>mkdir -p Bliss.framework/Versions/A<span></span></pre></td></tr><tr><td scope="row"><pre>gcc -c Peace.c Love.c<span></span></pre></td></tr><tr><td scope="row"><pre>libtool -dynamic<span></span></pre></td></tr><tr><td scope="row"><pre>  -install_name @executable_path/../Frameworks/Bliss.framework/Versions/A/Bliss<span></span></pre></td></tr><tr><td scope="row"><pre>  -o Bliss.framework/Versions/A/Bliss Peace.o Love.o<span></span></pre></td></tr><tr><td scope="row"><pre>  -framework System<span></span></pre></td></tr></table></div><p>For detailed information about designing and using frameworks, see <em><a href="../../../../MacOSX/Conceptual/BPFrameworks/Frameworks.html#//apple_ref/doc/uid/10000183i" data-renderer-version="1" target="_self">Framework Programming Guide</a></em>.</p></section><section><a name="//apple_ref/doc/uid/TP40001830-97992" title="Packaging Frameworks and Libraries Under an Umbrella Framework"></a><a name="//apple_ref/doc/uid/TP40001830-97992-TPXREF126" title="Packaging Frameworks and Libraries Under an Umbrella Framework"></a><h3 class="jump">Packaging Frameworks and Libraries Under an Umbrella Framework</h3><p>An <em class="newTerm">umbrella framework</em><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_51"></a> is a framework that serves as the “parent” of a group of frameworks and shared libraries that implement related functionality. Umbrella frameworks help manage extremely large development projects with complex interdependencies, such as subsystems of OS X itself. For all other projects, a single framework should suffice (and is better for load-time performance).</p><p>To create an umbrella framework, you can take a normal framework and designate a subset of its imported frameworks as subframeworks. The subframeworks themselves need not be aware that they are part of the umbrella. With <code>ld</code>, you can use the <code>-sub_umbrella</code> option to designate a subframework.</p><p>When your program links against an umbrella framework, it also implicitly links against all the subframeworks. Symbols located in subframeworks of umbrella frameworks are recorded in the client program as if they were implemented directly in the umbrella framework. This feature allows the contents of the umbrella framework to change over time while preserving compatibility with older client programs.</p><p>To ensure that clients link to the “parent” umbrella framework and not one of the subframeworks, the subframework can be built with a special load command to prevent unauthorized linking. When a client tries to link directly to such a subframework, the static linker produces an error. However, the subframework can authorize specific clients to link against it, and all subframeworks of an umbrella framework are implicitly authorized to link against each other. (Load commands are explained in <em><!--a target="_self" -->OS X ABI Mach-O File Format Reference<!--/a--></em>. The particular load commands referenced here are documented as <code><a href="https://developer.apple.com/reference/kernel/sub_framework_command" target="_self" class="urlLink">sub_framework_command</a></code> and <code><a href="https://developer.apple.com/reference/kernel/sub_client_command" target="_self" class="urlLink">sub_client_command</a></code>; <code>ld</code> generates them if given the <code>-sub_framework &lt;parent_umbrella_name></code> and <code>-sub_client &lt;client_name></code> options.) Note that these conventions are enforced at build time by the static linker but ignored by the dynamic linker at runtime.</p><p>You can also include libraries in umbrella frameworks. For example the Foundation framework includes both the Objective-C runtime library (<code>libobjc</code>) as a sublibrary and the Core Foundation framework as a subframework. You may build Foundation using a variation on the commands listed in <span class="content_text">Listing 3</span>.</p><a name="//apple_ref/doc/uid/TP40001830-97336-BABCFFBG" title="Listing 3Building a simple umbrella framework"></a><p class="codesample clear"><a name="//apple_ref/doc/uid/TP40001830-97336" title="Listing 3Building a simple umbrella framework"></a><strong class="caption_number">Listing 3</strong>&nbsp;&nbsp;Building a simple umbrella framework</p><div class="codesample clear"><table><tr><td scope="row"><pre>mkdir Foundation.framework<span></span></pre></td></tr><tr><td scope="row"><pre>gcc -dynamiclib -o Foundation.framework/Foundation -sub_umbrella CoreFoundation<span></span></pre></td></tr><tr><td scope="row"><pre>   -sub_library libobjc -framework CoreFoundation -lobjc Foundation.o<span></span></pre></td></tr></table></div><p>By convention, subframeworks of an umbrella framework live within the <code>Frameworks</code> directory in the root directory of the umbrella framework, although this is obviously not a technical requirement. For example, the Cocoa framework is an umbrella framework that includes the AppKit framework; the AppKit framework is itself an umbrella framework that includes Foundation and Application Services as subframeworks.</p></section></section><section><a name="//apple_ref/doc/uid/TP40001830-97384" title="Loading Plug-in Code With Bundles"></a><a name="//apple_ref/doc/uid/TP40001830-97384-BABJCDDD" title="Loading Plug-in Code With Bundles"></a><h2 class="jump">Loading Plug-in Code With Bundles</h2><p><em class="newTerm">Bundles</em><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_52"></a> provide the OS X mechanism for loading extension (or plug-in) code into an application at runtime. Typically, a bundle links against the application binary to gain access to the application’s exported API. Bundles can be—but are not required to be—packaged with resources, using the same folder hierarchy as that of an application package. In some cases (depending on the code in the bundle), bundles can also be unloaded.</p><p>OS X supports several schemes that allow third-party developers to extend the capabilities of your application by writing plug-in<a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_53"></a> code that your program can load at runtime. Although you can use any one of these plug-in schemes in any type of application, some are more suited to particular situations than others. For example:</p><ul class="ul"><li class="li"><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_54"></a><p>To load Objective-C classes at runtime, use the Foundation framework class <code>NSBundle</code>. <code>NSBundle</code> provides general services for referring to a packaged program, whether the program is an application or a plug-in.</p></li><li class="li"><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_55"></a><p>To load C functions at runtime, use the Core Foundation framework object <code>CFBundle</code>, which, like the <code>NSBundle</code> class, provides general services for referring to a packaged program, whether the program is an application or a plug-in.</p></li><li class="li"><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_56"></a><p>The Core Foundation framework object <code>CFPlugin</code> implements a small subset of the Microsoft Component Object Model (COM) standard. COM allows you to instantiate C functions and data in an object-oriented manner at runtime.</p></li><li class="li"><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_57"></a><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_58"></a><p>Carbon developers can also use <em class="newTerm">Code Fragment Manager (CFM)</em> to load code fragments updated for Carbon from PEF files. For more information, see the Code Fragment Manager documentation.</p></li><li class="li"><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_59"></a><p>In general, for applications or libraries targeted for OS X v10.4 or later, use the dynamic loader compatibility functions, defined in <code>/usr/include/dlfcn.h</code>, to load and link bundle files. These functions are the preferred way to load code at runtime. They are particularly helpful when porting UNIX tools that support plug-ins to OS X. See “Dynamic Loader Compatibility Functions” in <em><!--a target="_self" -->OS X ABI Dynamic Loader Reference<!--/a--></em> for more information.</p></li></ul><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40001830-SW2" title="Note"></a><p><strong>Note:</strong>&nbsp;The dynamic linker in OS X v10.0 causes your program to crash if you ask it to load programs that are built with a two-level namespace hint table. By default, the static linker in Mach OS X v10.0 creates bundles that do not include the two-level namespace hint table. If you want your program to run in OS X v10.0 and are developing in OS X v10.1 or later, use the <code>-flat_namespace</code><a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_60"></a> flag to ask the static linker to create the program using a flat namespace.</p><p></p></aside></div><p>The <code>CFBundle</code> and <code>CFPlugin</code> objects can both be used from Carbon applications running in both Mac OS 9 and OS X. Both the <code>NSBundle</code> class and the <code>CFPlugin</code> object allow you to package plug-in code with the resources associated with the plug-in (such as graphics files and documentation), similar to the packaging for an application. To load COM<a name="//apple_ref/doc/uid/TP40001830-DontLinkElementID_61"></a> objects in Mac OS 9, <code>CFPlugin</code> uses Code Fragment Manager, and in OS X, <code>CFPlugin</code> uses the object file image <code>dyld</code> library functions.</p><p>For more information on loading resources using the <code>NSBundle</code> class, see <em><a href="../../../../Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i" data-renderer-version="1" target="_self">Resource Programming Guide</a></em>. For more information on Code Fragment Manager, see <em>Mac OS Runtime Architectures</em>. For more information on <code>CFPlugin</code> and COM, see <em><!--a target="_self" -->Plug-in Programming Topics<!--/a--></em>.</p></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='indirect_addressing.html'>Next</a><a class='previousLink' rel='prev' href='executing_files.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2003, 2009 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2009-02-04</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/1260/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/library.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/feedback.js"></script>
</body>
</html>
