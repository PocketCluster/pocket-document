<!DOCTYPE html>
<html lang="en">
<head>
    <title>Deploying Applications With the C++ Runtime</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Guide">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40001666">
    <meta id="document-version" name="document-version" content="1.7.1">
    <meta id="build" name="build" content="ded95564c405529dbbbe590063edd114" />
    <meta id="chapterId" name="chapterId" content="TP40001668">
    <meta id="date" name="date" content="2009-10-09">
    <meta id="description" name="description" content="Provides information about how to create and deploy C++ binaries.">
    <meta id="book-title" name="book-title" content="C++ Runtime Environment Programming Guide">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/Guide}, {Topic/Xcode/Compiler Tools}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="C++ Runtime Environment Programming Guide: Deploying Applications With the C++ Runtime">
    <meta id="resources-uri" name="resources-uri" content="../../../../../Resources/1260">
    <link id="book-index-page" rel="Start" title="C++ Runtime Environment Programming Guide" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="CompatibleLibs.html">
    <link id="previous-page" rel="Prev" type="text/html" href="CPPROverview.html">
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../../Resources/1260/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40001668" title="Deploying Applications With the C++ Runtime"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>C++ Runtime Environment Programming Guide</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='CompatibleLibs.html'>Next</a><a class='previousLink' rel='prev' href='CPPROverview.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40001668-SW2" title="Deploying Applications With the C++ Runtime"></a><h1 id="pageTitle"><a name="//apple_ref/doc/uid/TP40001668-BCIFHCHA" title="Deploying Applications With the C++ Runtime"></a>Deploying Applications With the C++ Runtime</h1><p>In most situations, you should never have to worry about linking against the C++ runtime environment. When you build your C++ code, GCC chooses the most appropriate version of the C++ standard library and links to it. For applications compiled using GCC 3.3, the compiler links to the static C++ standard library <code>libstdc++.a</code>. For applications compiled using GCC 4.0, the compiler links to the dynamic C++ standard library <code>libstdc++.dylib</code> by default (<code>libstdc++.a</code> is also available as an option). </p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40001668-SW4" title="Note"></a><p><strong>Note:</strong>&nbsp;Whenever you build C++ programs for earlier versions of OS X, be sure to use the SDKs that come with XCode Tools. For more information on using these SDKs, see <em><a href="../../cross_development/Introduction/Introduction.html#//apple_ref/doc/uid/10000163i" data-renderer-version="1" target="_self">SDK Compatibility Guide</a></em>. </p><p></p></aside></div><p>The following sections describe issues you may encounter when linking against the dynamic runtime or the new static runtime. There are no known issues worth noting for deploying code using the original static C++ runtime. </p><section><a name="//apple_ref/doc/uid/TP40001668-SW3" title="Caveats for Using the New C++ Runtimes"></a><h2 class="jump">Caveats for Using the New C++ Runtimes</h2><p>The following caveats apply to the new static and dynamic C++ runtimes. </p><ul class="ul"><li class="li"><p>If your program must run on versions of OS X prior to 10.3.9, as well as OS X v10.3.9 and later, you must use the GCC 3.3 compiler and build your program using the original static C++ standard library (<code>libstdc++.a</code>).</p></li><li class="li"><p>Applications that run on OS X v10.3.9 must not try to use the <code>long double</code> type or any of the functions associated with it. Support for the 128-bit <code>long double</code> type was not introduced until OS X v10.4. Similarly, full support for <code>sinl</code>, <code>expl</code>, and all other <code>long double</code> math functions defined by the C standard is available only in 10.4 and later.</p></li><li class="li"><p>When overriding the <code>new</code> and <code>delete</code> operators, your overrides will be visible across shared library boundaries (application wide) unless you specifically takes steps to make them hidden (such as with an (un)export list).  Even uses of <code>new</code>/<code>delete</code> in system frameworks, in the dynamic C++ runtime (even if you are only indirectly linked to it) or in other modules (possibly linked statically or dynamically to the C++ runtime) will use your overrides, unless that module also has overridden <code>new</code>/<code>delete</code> operators.</p><p>Unless you are sure that code modules are using the same operator <code>new</code> and <code>delete</code>, do not transfer memory ownership across shared library boundaries. </p></li><li class="li"><p>Multithreaded applications which use the standard stream (<code>std::cin</code>, <code>std::cout</code>, and so on) must explicitly synchronize their use of these global objects if there is any chance that two threads may simultaneously access one of them. Functions that set global state (such as <code>set_terminate</code>, <code>set_unexpected</code>, and so on) must also be explicitly synchronized if multiple threads can call them at once.  In general:</p><ol class="ol"><li class="li"><p> It is safe to simultaneously call <code>const</code> and non-<code>const</code> methods from different threads to distinct objects.</p></li><li class="li"><p>It is safe to simultaneously call <code>const</code> methods, and methods otherwise guaranteed not to alter the state of an object (or invalidate outstanding references and iterators of a container) from different threads to the same object.</p></li><li class="li"><p>It is not safe for different threads to simultaneously access the same object when at least one thread calls non-<code>const</code> methods, or methods that invalidate outstanding references or iterators to the object. The programmer is responsible for using thread synchronization primitives to avoid such situations.</p></li></ol></li></ul></section><section><a name="//apple_ref/doc/uid/TP40001668-SW5" title="Deploying With the New Dynamic Runtime"></a><h2 class="jump">Deploying With the New Dynamic Runtime</h2><p>This is the library used by default when using GCC 4.0 and is appropriate when targeting OS X v10.3.9 and later. For a list of caveats for using this library, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40001668-SW3" data-renderer-version="1">Caveats for Using the New C++ Runtimes</a></span>.  </p></section><section><a name="//apple_ref/doc/uid/TP40001668-SW1" title="Deploying With the New Static Runtime"></a><h2 class="jump">Deploying With the New Static Runtime</h2><p>In Xcode 2.3, a new version of the static C++ standard library <code>libstdc++-static.a</code> was introduced.  You can link against the new static C++ standard library using Xcode 2.3 or the command line. To link against the library using Xcode, simply set "C++ Standard Library Type" in the build settings to "Static".  To link against this library on the command line, use <code>gcc</code> instead of <code>g++</code> and append the following two commands to the end of the command: <code>-shared-libgcc</code> and <code>-lstdc++-static</code>. For example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>gcc one.o two.o -o my_application -shared-libgcc -lstdc++-static<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40001668-SW6" title="Note"></a><p><strong>Note:</strong>&nbsp;The extra options to specify the static C++ runtime must appear at the end of the command. </p><p></p></aside></div><p>For a list of caveats for using this library, see <span class="content_text"><a href="#//apple_ref/doc/uid/TP40001668-SW3" data-renderer-version="1">Caveats for Using the New C++ Runtimes</a></span> and the next section. </p><section><a name="//apple_ref/doc/uid/TP40001668-SW7" title="Additional Caveats for Using the New Static Runtime"></a><h3 class="jump">Additional Caveats for Using the New Static Runtime</h3><p>The new static C++ standard library marks all of its symbols as "hidden", which means those symbols are not exported by an application that links to the library. It is still possible, however, for symbols from the C++ library to be exported by your application. For example, your application might include symbols from the library in header files or other visible locations. To prevent symbols from being accidentally exported, you must use an export list for any binaries that link against the static C++ library. (For more information about the use of export lists, see <span class="content_text"><!--a target="_self" -->Reducing the Number of Exported Symbols<!--/a--></span>. For information on using visibility pragmas and visibility switches to control symbol visibility in your own code, see <span class="content_text"><a href="SymbolVisibility.html#//apple_ref/doc/uid/TP40001670-CJBGBHEJ" data-renderer-version="1">Controlling Symbol Visibility</a></span>.) </p><div class="warningbox clear"><aside><a name="//apple_ref/doc/uid/TP40001668-DontLinkElementID_4" title="Warning"></a><p><strong>Warning:</strong>&nbsp;Remember that the system frameworks continue to use the dynamic version of the C++ standard library. If you link your binary against the static C++ library and one or more system frameworks, you may run into namespace conflicts. You must ensure that no C++ symbols (symbols starting with <code>_Z</code>) are exported from binaries that use the static C++ standard library. If it does export such symbols, your binary may potentially stop working after the installation of a system upgrade, software update, or security update. </p><p></p><div class="clear"></div></aside></div><p>Callback functions (such as registered with <code>std::set_terminate</code>) are only effective when triggered within the same code module.</p><p>This static library has the same size disadvantages as the one used with gcc 3.3.  For details about this issue, see <span class="content_text"><a href="CPPROverview.html#//apple_ref/doc/uid/TP40001667-97487" data-renderer-version="1">Advantages of a Shared C++ Runtime </a></span>.</p></section></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='CompatibleLibs.html'>Next</a><a class='previousLink' rel='prev' href='CPPROverview.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2005, 2009 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2009-10-09</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../../Resources/1260/JavaScript/lib/prototype.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/library.js"></script>
    <script src="../../../../../Resources/1260/JavaScript/feedback.js"></script>
</body>
</html>
