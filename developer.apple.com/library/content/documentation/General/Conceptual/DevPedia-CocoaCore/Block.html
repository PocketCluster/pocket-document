<!DOCTYPE html>
<html lang="en">
<head>
    <title>Block object</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta id="book-resource-type" name="book-resource-type" content="DevPedia">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40008195">
    <meta id="document-version" name="document-version" content="5.3.10">
    <meta id="build" name="build" content="ded95564c405529dbbbe590063edd114" />
    <meta id="chapterId" name="chapterId" content="TP40008195-CH3">
    <meta id="date" name="date" content="2015-10-21">
    <meta id="description" name="description" content="A collection of short articles on the core concepts, patterns, and mechanisms in Cocoa programming. ">
    <meta id="book-title" name="book-title" content="Cocoa Core Competencies">
    <meta id="book-root" name="book-root" content="./">
    <meta id="book-doc-type" name="book-doc-type" content="Pedia">
    <meta id="book-json" name="book-json" content="book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Guides and Sample Code">
    <meta id="book-assignments" name="book-assignments" content="{Type/DevPedia}, {Topic/General}">
    <link id="book-index-page" rel="Start" title="Cocoa Core Competencies" type="text/html" href="index.html">
    <link id="next-page" rel="Next" type="text/html" href="Bundle.html">
    <link id="previous-page" rel="Prev" type="text/html" href="AppSigning.html">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2017 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="Cocoa Core Competencies: Block object">
    <meta id="resources-uri" name="resources-uri" content="../../../../Resources/1260">
    <link rel="stylesheet" type="text/css" href="../../../../Resources/1260/CSS/screen.css">
    <link rel='stylesheet' type='text/css' href='../../../../Resources/1260/CSS/pedia.css' />
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../Resources/1260/CSS/feedback.css">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40008195-CH3" title="Block object"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="appleglobal,appleusdeveloper,dappdeveloperlib"
    </script>

    <script type="text/javascript" src="https://www.apple.com/metrics/scripts/s_code_h.js"></script>
    <script type="text/javascript">
    s.pageName=AC.Tracking.pageName();
    s.channel="www.us.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>
    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../navigation/'>Guides and Sample Code</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Guides and Sample Code</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>Cocoa Core Competencies</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>
    <!-- CONTENTS -->
    <article id="contents" role='main'>
        <section id="pediaContents" class='twoColumnRecipe'>
            
            <a name="//apple_ref/doc/uid/TP40008195-CH3-SW1" title="Block object"></a><h1 id="pageTitle">Block object</h1><p>Block objects are a C-level syntactic and runtime feature that allow you to compose function expressions that can be passed as arguments, optionally stored, and used by multiple threads. The function expression can reference and can preserve access to local variables. In other languages and environments, a block object is sometimes also called a closure or a lambda. You use a block when you want to create units of work (that is, code segments) that can be passed around as though they are values. Blocks offer more flexible programming and more power. You might use them, for example, to write callbacks or to perform an operation on all the items in a collection.</p><section><a name="//apple_ref/doc/uid/TP40008195-CH3-SW2" title="Declaring a Block"></a><h2 class="jump">Declaring a Block</h2><p>In many situations, you use blocks inline so you don’t need to declare them. The declaration syntax, however, is similar to the standard syntax for function pointers, except that you use a caret (^) instead of an asterisk pointer (*). For example, the following declares a variable <code>aBlock</code> that references a block that requires three parameters and returns a <code>float</code> value:</p><div class="codesample clear"><table><tr><td scope="row"><pre>float (^aBlock)(const int*, int, float);<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40008195-CH3-SW3" title="Creating a Block"></a><h2 class="jump">Creating a Block</h2><p>You use the caret (<code>^</code>) operator to indicate the beginning, and a semicolon to indicate the end of a block expression. The following example declares a simple block and assigns it to a previously declared block variable (<code>oneFrom</code>): </p><div class="codesample clear"><table><tr><td scope="row"><pre>int (^oneFrom)(int);<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>oneFrom = ^(int anInt) {<span></span></pre></td></tr><tr><td scope="row"><pre>    return anInt - 1;<span></span></pre></td></tr><tr><td scope="row"><pre>};<span></span></pre></td></tr></table></div><p>The closing semicolon is required as a standard C end-of-line marker.</p><p>If you don’t explicitly declare the return value of a block expression, it can be automatically inferred from the contents of the block.</p></section><section><a name="//apple_ref/doc/uid/TP40008195-CH3-SW5" title="Block-Mutable Variables"></a><h2 class="jump">Block-Mutable Variables</h2><p>You can use the <code>__block</code> storage modifier with variables declared locally to the enclosing lexical scope to denote that such variables should be provided by reference in a block and so are mutable. Any changes are reflected in the enclosing lexical scope, including any other blocks defined within the same enclosing lexical scope.</p></section><section><a name="//apple_ref/doc/uid/TP40008195-CH3-SW4" title="Using Blocks"></a><h2 class="jump">Using Blocks</h2><p>If you declare a block as a variable, you can use it as you would a function. The following example prints 9 as output.</p><div class="codesample clear"><table><tr><td scope="row"><pre>printf("%d\n", oneFrom(10));<span></span></pre></td></tr></table></div><p>Typically, however, you pass a block as the argument to a function or a method. In these cases, you often create a block inline.</p><p>The following example determines whether an <code>NSSet</code> object contains a word specified by a local variable and sets the value of another local variable (<code>found</code>) to <code><!--a  -->YES<!--/a--></code> (and stops the search) if it does. In this example, <code>found</code> is declared as a <code>__block</code> variable.</p><div class="codesample clear"><table><tr><td scope="row"><pre>__block BOOL found = NO;<span></span></pre></td></tr><tr><td scope="row"><pre>NSSet *aSet = [NSSet setWithObjects: @"Alpha", @"Beta", @"Gamma", @"X", nil];<span></span></pre></td></tr><tr><td scope="row"><pre>NSString *string = @"gamma";<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>[aSet enumerateObjectsUsingBlock:^(id obj, BOOL *stop) {<span></span></pre></td></tr><tr><td scope="row"><pre>    if ([obj localizedCaseInsensitiveCompare:string] == NSOrderedSame) {<span></span></pre></td></tr><tr><td scope="row"><pre>        *stop = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>        found = YES;<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}];<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>// At this point, found == YES<span></span></pre></td></tr></table></div><p>In this example, the block is contained within the method’s argument list. The block also makes use of a stack local variable.</p></section><section><a name="//apple_ref/doc/uid/TP40008195-CH3-SW8" title="Comparison Operations"></a><h2 class="jump">Comparison Operations</h2><p>One of the more common operations you perform with blocks in a Cocoa environment is comparison of two objects—to sort the contents of an array, for example. The Objective-C runtime defines a block type—<code>NSComparator</code>—to use for these comparisons.</p></section><div id="seeAlsoSection"><div class="pediaPrerequisites"><a name="//apple_ref/doc/uid/TP40008195-CH3-DontLinkElementID_16" title="Prerequisite Articles"></a><h3>Prerequisite Articles</h3><ul class="tooltip"><li class="tooltip"><span class="pediaLink" data-header="Message" data-contents="A message is the name of a method, and any parameters associated with it, that are sent to, and executed by, an object. "><a href="Message.html#//apple_ref/doc/uid/TP40008195-CH59-SW1" data-renderer-version="1">Message</a></span></li></ul></div><div class="pediaRelated"><a name="//apple_ref/doc/uid/TP40008195-CH3-DontLinkElementID_17" title="Related Articles"></a><h3>Related Articles</h3><ul class="tooltip"><li class="tooltip"><span class="pediaLink" data-header="Enumeration" data-contents="Enumeration is the process of sequentially operating on elements of an object—typically a collection—each at most once, one at a time in turn. "><a href="Enumeration.html#//apple_ref/doc/uid/TP40008195-CH17-SW1" data-renderer-version="1">Enumeration</a></span></li></ul></div><div class="pediaDefinitiveDiscussion"><a name="//apple_ref/doc/uid/TP40008195-CH3-DontLinkElementID_18" title="Definitive Discussion"></a><h3>Definitive Discussion</h3><ul class="tooltip"><span class="content_text"><a href="../../../Cocoa/Conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8" data-renderer-version="1" target="_self">Working with Blocks</a></span></ul></div></div>
        </section>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2015 Apple Inc. All Rights Reserved. <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2015-10-21</p></div></div>

    </article>
    <!-- /CONTENTS -->
    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="leave_feedback" class="button" role="button" tabindex="0">Feedback</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    <script type="text/javascript" src="../../../../Resources/1260/JavaScript/lib/prototype.js"></script>
    <script src="../../../../Resources/1260/JavaScript/library.js"></script>
    <script src="../../../../Resources/1260/JavaScript/feedback.js"></script>
</body>
</html>
